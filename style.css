@import url('https://fonts.googleapis.com/css2?family=IBM+Plex+Sans+KR:wght@300;400;500;600;700&display=swap');

/* [수정] 스크롤바 공간만 투명하게 확보 (유령 스크롤바 안 보임) */
html {
    scrollbar-gutter: stable;
}

:root {
    --bg-pattern: none;
    --bg-gradient: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    --card-bg-inactive: rgba(255, 255, 255, 0.8);
    --active-surface: #f8f9fa;
    --text-primary: #2d3436;
    --text-secondary: #636e72;
    --text-muted: #b2bec3;
}

body {
    font-family: 'Pretendard', sans-serif;
    margin: 0;
    padding: 0;
    color: var(--text-primary);
    background-color: #f5f7fa;
    background-image: var(--bg-pattern), var(--bg-gradient);
    background-attachment: fixed;
    min-height: 100vh;
    transition: background 0.6s ease-in-out;
    /* [추가] 텍스트 좌우 폭 축소 (Condensing Effect) */
    letter-spacing: -0.04em;
}

/* [전면 개편] 헤더 레이아웃 (좌측 로고 / 우측 메뉴) */
header {
    position: sticky;
    top: 0;
    z-index: 1000;
    background: rgba(255, 255, 255, 0.75);
    backdrop-filter: blur(12px) saturate(180%);
    -webkit-backdrop-filter: blur(12px) saturate(180%);
    border-bottom: 1px solid rgba(0, 0, 0, 0.05);
    padding: 0;
    transition: all 0.5s cubic-bezier(0.25, 1, 0.5, 1);
    box-shadow: 0 4px 30px rgba(0, 0, 0, 0.03);
    width: 100%;
    /* 전체 너비 */
}

/* 헤더 컨테이너: 좌우 분할의 핵심 */
.header-container {
    display: flex;
    justify-content: space-between;
    align-items: center;
    width: 100%;
    max-width: 1800px;
    margin: 0 auto;
    height: 60px;
    padding: 0;
    /* 좌우 패딩 제거 */
    box-sizing: border-box;
}

/* 1. 좌측: 로고 영역 (좌측 패딩 추가) */
.header-left {
    display: flex;
    align-items: center;
    height: 100%;
    padding-left: 0px;
    /* 로고 좌측 여백 확보 */
}

.logo-btn {
    background: transparent;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 0;
    height: 100%;
    transition: transform 0.2s;
}

.logo-btn:hover {
    transform: scale(1.02);
}

.logo-icon {
    font-size: 1.8rem;
    line-height: 1;
}

.logo-text {
    font-family: 'Noto Serif KR', serif;
    font-size: 1.5rem;
    font-weight: 900;
    color: var(--text-primary);
    letter-spacing: -0.03em;
    white-space: nowrap;
}

/* 2. 우측: 내비게이션 영역 (우측 패딩 추가) */
.header-right {
    display: flex;
    align-items: center;
    gap: 15px;
    height: 100%;
    padding-right: 0px;
    /* 메뉴 우측 여백 확보 */
}

/* 메뉴 그룹 (Cluster) */
.nav-cluster {
    display: flex;
    align-items: center;
    gap: 10px;
    /* 버튼 간 간격 */
    height: 100%;
}

/* 구분선 */
.nav-divider {
    width: 1px;
    height: 18px;
    background-color: rgba(0, 0, 0, 0.15);
    margin: 0 5px;
}

/* 버튼 스타일 재정의 */
.tab-btn,
.group-btn {
    background: transparent;
    border: none;
    height: 100%;
    /* 헤더 높이 꽉 채우기 */
    display: flex;
    align-items: center;
    padding: 0 12px;
    margin: 0;
    font-family: 'Noto Serif KR', serif;
    font-size: 1.05rem;
    font-weight: 700;
    color: color-mix(in srgb, var(--text-primary) 70%, transparent);
    /* 기본 연하게 */
    cursor: pointer;
    position: relative;
    transition: all 0.2s;
    border-radius: 8px;
    /* 호버 시 배경 둥글게 */
}

/* 아이콘 간격 */
.menu-icon {
    margin-right: 6px;
    font-size: 1.1rem;
}

/* 호버 및 활성 상태 */
.tab-btn:hover,
.group-btn:hover,
.tab-btn.active,
.group-btn.active,
.nav-group:hover .group-btn,
.nav-group:has(.sub-tab-btn.active) .group-btn {
    color: var(--text-primary);
    /* 진하게 */
    background-color: rgba(0, 0, 0, 0.04);
    /* 연한 배경 */
}

/* 드롭다운 메뉴 위치 조정 */
.sub-menu {
    top: 80px;
    /* 헤더 바로 아래 */
    right: 0;
    /* 우측 정렬 */
    left: auto;
    /* 좌측 정렬 해제 */
    border-top-left-radius: 12px;
    border-top-right-radius: 12px;
}

/* 헤더 확장 (드롭다운 열릴 때) */
header:not(.header-shrunk):has(.nav-group:hover),
header:not(.header-shrunk):has(.sub-tab-btn.active) {
    padding-bottom: 0;
    /* 기존 패딩 제거 (드롭다운이 덮는 방식) */
}

/* 헤더 축소 시 (스크롤 내렸을 때) */
header.header-shrunk {
    height: 50px !important;
    border-bottom: 1px solid rgba(0, 0, 0, 0.1);
}

header.header-shrunk .header-container {
    height: 50px !important;
}

header.header-shrunk .logo-text {
    font-size: 1.2rem;
}

header.header-shrunk .header-right {
    opacity: 0;
    pointer-events: none;
    /* 메뉴 숨김 */
}

/* 그룹 컨테이너 */
/* [패널 개선] 수직 드롭다운 및 활성 탭 고정 스타일 */
.nav-group {
    position: relative;
    display: inline-block;
    /* 수평 정렬 유지 */
}

/* 수직 드롭다운 메뉴 스타일 (개선됨) */
.sub-menu {
    position: absolute;
    top: 100%;
    /* 대분류 버튼 바로 아래부터 시작 */
    left: 0;
    flex-direction: column;
    /* 세로 나열 */
    background: #ffffff;
    border: 1px solid rgba(0, 0, 0, 0.1);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.1);
    border-radius: 12px;
    padding: 10px 0;
    min-width: 320px;

    /* [핵심 수정 1] 평소에는 투명하고, 클릭도 통과되도록 설정 */
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    /* 마우스가 떠나면 즉시 클릭이 뒤로 통과됨 (방해 금지) */
    transform: translateY(10px);

    /* [핵심 수정 2] 닫힐 때: 딜레이 없이 즉시 투명해지기 시작 */
    /* visibility는 0.2s 뒤에 꺼지지만, pointer-events: none 덕분에 즉시 조작 가능 */
    transition: opacity 0.2s ease-out, transform 0.2s ease-out, visibility 0s linear 0.2s;
    z-index: 9999;
}

.nav-group:hover .sub-menu {
    /* [핵심 수정 3] 마우스 올렸을 때: 즉시 보이고 클릭 가능하게 변경 */
    opacity: 1;
    visibility: visible;
    pointer-events: auto;
    /* 다시 클릭 가능 상태로 복구 */
    transform: translateY(25);

    /* 열릴 때는 부드럽게 등장 */
    transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}

/* [신규] 드롭다운 메뉴 호버 끊김 방지용 '투명 다리' */
.nav-group::before {
    content: '';
    position: absolute;
    top: 100%;
    /* 메뉴 버튼 바로 아래부터 시작 */
    left: 0;
    width: 100%;
    height: 10px;
    /* 추가 판정 영역의 높이 (틈의 크기) */

    background: transparent;
    /* 눈에는 보이지 않음 */
    display: none;
    /* 평소에는 숨겨 둠 */
}

/* 마우스를 올렸을 때만 '투명 다리'를 활성화 */
.nav-group:hover::before {
    display: block;
}

.sub-tab-btn {
    width: calc(100% - 20px);
    text-align: left;
    padding: 8px 15px;
    background: transparent;
    border: none;
    color: var(--text-secondary);
    cursor: pointer;
    border-radius: 12px;
    margin: 5px 10px;
    transition: all 0.2s;
    /* 그리드 레이아웃 핵심 */
    display: grid !important;
    grid-template-columns: 40px 1fr;
    /* 이모지 50px, 나머지 텍스트 */
    align-items: center;
    gap: 10px;
}

.sub-tab-btn:hover {
    background: rgba(0, 0, 0, 0.05);
}

.sub-tab-btn.active {
    background: var(--text-primary);
    color: #fff;
}

/* 이모지 스타일: 텍스트에 밀리지 않도록 고정 */
/* 평상시: 흑백 및 약간 투명하게 설정 */
.sub-tab-btn .menu-icon {
    font-size: 1.8rem;
    display: flex;
    justify-content: center;
    align-items: center;
    filter: grayscale(100%);
    opacity: 0.6;
    transition: all 0.3s ease;
}

/* 마우스 오버 시: 컬러로 복원 */
.sub-tab-btn:hover .menu-icon {
    filter: grayscale(0%);
    opacity: 1;
}

/* 활성화 상태일 때: 컬러로 고정 */
.sub-tab-btn.active .menu-icon {
    filter: grayscale(0%);
    opacity: 1;
}

/* 텍스트 그룹 스타일: 제목과 수식어를 세로로 나열 */
.sub-tab-btn .text-group {
    display: flex;
    flex-direction: column;
    justify-content: center;
    overflow: hidden;
    /* 텍스트 넘침 방지 */
}

.sub-tab-btn .menu-title {
    font-family: 'Noto Serif KR', serif;
    font-size: 1.1rem;
    font-weight: 700;
    line-height: 1.3;
    white-space: nowrap;
    /* 제목 줄바꿈 방지 */
}

.sub-tab-btn .menu-desc {
    font-size: 0.8rem;
    font-weight: 400;
    opacity: 0.7;
    line-height: 1.4;
    word-break: keep-all;
    /* 수식어는 단어 단위 개행 */
}

.sub-tab-btn.active .menu-desc {
    color: #fff;
    opacity: 0.8;
}

/* [재수정] 밑줄: 글자 바로 아래에 위치 */
.tab-btn.active::after,
.nav-group:has(.sub-tab-btn.active) .group-btn::after {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 10px;
    right: 10px;
    width: auto;
    height: 3px;
    background: var(--text-primary);
    z-index: 10;
}

/* [재수정] 알약: 밑줄 바로 아래에 딱 붙임 */
.nav-group::after {
    content: attr(data-active-tab);
    position: absolute;
    /* 밑줄(bottom: 15px) 바로 아래인 bottom: -15px 지점 */
    /* top 기준으로는 헤더 높이(60px) - 15px + 알파 */
    top: 45px;
    left: 50%;
    transform: translateX(-50%);

    background: var(--text-primary);
    color: #fff;
    padding: 4px 10px;
    border-radius: 12px;

    font-family: 'Noto Serif KR', serif;
    font-size: 0.9rem;
    font-weight: 400;
    white-space: nowrap;

    opacity: 0;
    transition: opacity 0.3s;
    pointer-events: none;
    z-index: 2000;
}

/* 활성 상태일 때만 표시 */
.nav-group:has(.sub-tab-btn.active)::after {
    opacity: 1;
}

/* [수정] 헤더 높이 자동 확장 (PC 전용으로 격리) */
@media (min-width: 1025px) {
    header:not(.header-shrunk):has(.sub-tab-btn.active) {
        height: auto;
        padding-bottom: 25px;
        /* 알약이 들어갈 공간만큼 헤더를 늘림 */
    }
}

/* 헤더 높이 확장 유지 */
header:not(.header-shrunk):has(.sub-tab-btn.active) {
    padding-bottom: 40px;
}

.controls {
    width: 100%;
    display: flex;
    justify-content: center;
    transition: all 0.4s ease;
}

.controls input {
    padding: 10px 20px;
    border-radius: 50px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    background: #fff;
    font-size: 0.95rem;
    width: 300px;
    text-align: center;
    transition: all 0.3s;
    position: relative;
    z-index: 10;
}

.controls input:focus {
    outline: none;
    width: 400px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

/* [v4.0] 섹션 전환용 */
.content-section {
    display: none;
    animation: fadeIn 0.4s ease-out;
    padding: 40px 20px 600px;
}

.content-section.active {
    display: block;
}

/* 홈 섹션 스타일 */
.home-section {
    display: none;
    /* JS로 제어 */
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 100vh;
    text-align: center;

    /* [수정] 상속받은 패딩을 완전히 제거하여 너비 초과 방지 */
    padding: 0 !important;
    width: 100%;
    max-width: 100%;
    box-sizing: border-box;
}

.home-section.active {
    display: flex;
}

.home-title {
    font-family: 'Noto Serif KR', serif;
    font-size: 4rem;
    font-weight: 900;
    margin-bottom: 20px;
    color: #2d3436;
    letter-spacing: -0.03em;
    text-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
}

.home-desc {
    font-size: 1.2rem;
    color: #636e72;
    line-height: 1.6;
    max-width: 600px;
    word-break: keep-all;
}

/* 기존 스타일 유지 */
.grid-container {
    counter-reset: region-card-counter;
    /* [핵심] 여기서부터 숫자 세기 시작 */
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 30px;
    max-width: 1600px;
    margin: 0 auto;
    align-items: start;
}

/* [기본 카드] 평상시: 배경이 비치는 맑은 유리 질감 */
.region-card {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.4) 100%);
    backdrop-filter: blur(3px);
    /* 블러는 유지하여 글자 가독성 확보 */

    /* 형태 유지 */
    height: 100px;
    border-radius: 12px;

    /* 테두리도 약간 더 투명하게 */
    border: 1px solid rgba(255, 255, 255, 0.3);
    border-left: 5px solid transparent;

    box-shadow:
        0 4px 10px rgba(0, 0, 0, 0.05),
        inset 0 1px 0 rgba(255, 255, 255, 0.4);

    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
    cursor: pointer;
    position: relative;
    z-index: 1;
    display: flex;
    flex-direction: column;
    justify-content: center;
    overflow: hidden;
}

/* [호버 효과] 마우스 오버 시: 불투명해지며 정보 강조 (Pop-up) */
.region-card:hover {
    transform: translateY(-5px);

    /* 배경을 거의 완전한 흰색으로 변경하여 내용 강조 */
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.98), rgba(255, 255, 255, 0.95));

    /* 발광 그림자 효과 유지 */
    box-shadow:
        0 10px 20px -5px rgba(0, 0, 0, 0.1),
        0 0 20px color-mix(in srgb, var(--theme) 40%, transparent);

    border-color: var(--theme);
}

/* [비활성 카드] 기능 유지 (클릭 가능) */
.region-card.dimmed {
    opacity: 0.6;
    filter: grayscale(20%) blur(1px) !important;
    transform: scale(0.98);
    cursor: pointer;
    /* 마우스 올리면 손가락 모양 유지 */
    pointer-events: auto !important;
    /* [중요] 클릭 차단 해제 유지 */
    transition: all 0.3s ease;
}

/* [비활성 카드 호버] 살짝 밝아짐 (기존 유지) */
.region-card.dimmed:hover {
    opacity: 0.9;
    filter: grayscale(0%);
    transform: scale(1.0);
}

/* [활성 카드] 강조 효과 */
.region-card.active {
    background: var(--active-surface);
    /* 1. 전체 테두리는 연하게 하되 */
    border-color: rgba(0, 0, 0, 0.1);
    /* 2. [핵심] 왼쪽 테두리(띠지) 색상은 테마색을 유지하도록 명시 */
    border-left-color: var(--theme) !important;
    border-bottom: none;
    border-bottom-left-radius: 0;
    border-bottom-right-radius: 0;
    transform: scale(1.02);

    /* 활성 시 발광 효과 유지 */
    box-shadow: 0 0 25px color-mix(in srgb, var(--theme) 18%, transparent), 0 -5px 15px rgba(0, 0, 0, 0.05);
    z-index: 20;
    opacity: 1 !important;
    filter: none !important;
}

.region-card.active::after {
    content: '';
    position: absolute;
    bottom: -15px;
    left: -1px;
    width: calc(100% + 2px);
    height: 20px;
    background: var(--active-surface);
    z-index: 21;
}

/* [헤더 레이아웃] */
.card-header {
    padding: 0 30px 0 36px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    height: 100%;
    position: relative;
    z-index: 2;
}

.header-content {
    position: relative;
    z-index: 5;
    width: 100%;
}

/* [제목 폰트] 크기 축소 및 스타일 */
.header-content h2 {
    position: relative;
    /* 로마자 기준점 */
    font-family: 'Noto Serif KR', serif;
    font-size: 1.3rem;
    /* 1.6 -> 1.3 축소 */
    font-weight: 800;
    margin: 0 0 4px 0;
    color: var(--text-primary);
    transition: transform 0.3s, color 0.3s;
    transform-origin: left;
    /* 텍스트 그림자 제거로 깔끔함 추구 (원하면 복구 가능) */
    word-break: keep-all;
}

/* [로마자 숫자] 위치 및 크기 조정 */
.header-content h2::before {
    z-index: 2;
    counter-increment: region-card-counter;
    content: counter(region-card-counter, upper-roman);
    position: absolute;

    /* 높이 축소에 맞춰 위치 재조정 */
    left: -1px;
    top: -20px;
    transform: none;

    font-family: 'Inter', sans-serif;
    font-weight: 700;
    font-size: 1.1rem;
    /* 1.5 -> 1.1 축소 */
    color: var(--theme);
    opacity: 0.6;
    /* 0.8 -> 0.6 투명도 조정 */

    width: auto;
    text-align: left;
}

/* [예외 처리] 기후 섹션 로마자 숨김 (기존 유지) */
#climate-main-grid .header-content h2::before {
    display: none;
}

#climate-main-grid .header-content h2 {
    padding-left: 0;
}

/* [활성 카드 제목] 확대 효과 */
.region-card.active .header-content h2 {
    transform: scale(1.05);
    color: #000;
}

/* [부제 폰트] 크기 축소 */
.header-content p {
    margin: 0;
    font-size: 0.85rem;
    /* 0.9 -> 0.85 축소 */
    color: var(--text-secondary);
    font-weight: 500;
    /* 텍스트 그림자 제거 */
    word-break: keep-all;
}

.card-bg-icon {
    position: absolute;
    bottom: -10px;
    left: -10px;
    width: 140px;
    height: 140px;
    z-index: 0;
    opacity: 0.15;
    pointer-events: none;
    fill: var(--theme);
    transition: all 0.5s ease;
}

.panel-bg-icon {
    position: absolute;
    bottom: 0;
    right: 0;
    width: 400px;
    height: 400px;
    opacity: 0.08;
    z-index: 0;
    pointer-events: none;
    fill: var(--panel-theme);
}

/* [추가] 자원 섹션 5번 카드 (비금속) */
.expand-icon {
    font-size: 1.2rem;
    color: var(--text-muted);
    border: 1px solid var(--text-muted);
    border-radius: 50%;
    width: 28px;
    height: 28px;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s;
    background: rgba(255, 255, 255, 0.5);
    position: relative;
    z-index: 10;
}

.region-card.active .expand-icon {
    transform: rotate(180deg);
    background: var(--text-primary);
    color: #fff;
    border-color: var(--text-primary);
}

.detail-panel {
    grid-column: 1 / -1;
    background: var(--active-surface);
    border-radius: 12px;
    border: 1px solid rgba(0, 0, 0, 0.1);
    border-top: none;
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.1);
    display: none;
    max-height: 0;
    opacity: 0;
    overflow: hidden;
    margin-top: -15px;
    padding: 0 50px;
    z-index: 10;
    position: relative;
    transition: max-height 0.4s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.3s ease-out, padding 0.3s ease-out;
}

#detail-content-area {
    position: relative;
    z-index: 5;
}

.detail-panel.open {
    display: block;
    max-height: 2500px;
    opacity: 1;
    padding: 10px 30px 30px 30px;
}

.panel-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: 25px;
}

.hidden-data {
    display: none;
}

.sub-region-card {
    background: #fff;
    border-radius: 10px;
    padding: 25px;
    border: 1px solid rgba(0, 0, 0, 0.05);
    transition: all 0.2s;
}

.sub-region-card:hover {
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.06);
    transform: translateY(-3px);
    z-index: 5;
    position: relative;
}

.sub-title-group {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    margin-bottom: 15px;
    position: relative;
    /* 버튼의 기준점 */
    /* padding-right: 100px;  <-- [삭제] 이 쓰레기 코드가 설명글을 좁게 만들었습니다 */
}

.sub-title-number {
    font-family: 'Noto Serif KR', serif;
    font-size: 2.5rem;
    font-weight: 800;
    color: var(--panel-theme, #dfe6e9);
    line-height: 1;
    opacity: 0.8;
    margin-top: -5px;
    transition: color 0.3s;
    width: 54px;
    height: 54px;
    display: flex;
    align-items: center;
    justify-content: center;
    border: 2px solid var(--panel-theme, #dfe6e9);
    border-radius: 10px;
    background-color: rgba(0, 0, 0, 0.02);
}

.sub-title-content {
    flex: 1;
    padding-top: 2px;
}

.sub-title-heading {
    font-size: 1.15rem;
    font-weight: 700;
    color: var(--text-primary);
    margin: 0 0 8px 0;

    /* [핵심] 제목만 버튼 공간만큼 비켜가게 설정 */
    padding-right: 110px;
}

.sub-title-description {
    font-size: 0.9rem;
    color: var(--text-secondary);
    margin: 0;
    padding: 0;
    border: none;
    line-height: 1.6;
    word-break: keep-all;
}

.detail-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.detail-item {
    display: flex;
    flex-direction: column;
    margin-bottom: 11px;
    padding: 0 0 11px 0;
    border-left: none;
    border-radius: 4px;
    /* 밝아진 배경 위에서 시인성을 확보하기 위해 투명도를 살짝 올림 */
    background-color: rgba(255, 255, 255, 0.5);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
    transition: all 0.2s ease-out;
    overflow: hidden;
}

.detail-item:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.12);
    background-color: #fff;
    border-color: var(--panel-theme, #2d3436);
    border-left-color: transparent !important; /* 부모 테두리와 띠지 중첩 방지 */
}

.detail-item:last-child {
    border-bottom: none;
    margin-bottom: 0;
}

.item-title-group {
    border-left: 3px; /* 딱딱한 세로선 제거 */
    padding: 11px 15px 2px 20px;
    transition: all 0.2s;
    position: relative;
}

/* [가로선] 오른쪽으로 갈수록 자연스럽게 사라짐 */
.item-title-group::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 20px; /* 길이를 약간 늘려 부드러운 소멸 유도 */
    height: 2px;
    background: linear-gradient(to right, var(--panel-theme, #dfe6e9), transparent);
    transition: all 0.2s;
}

/* [세로선] 아래쪽으로 갈수록 자연스럽게 사라짐 */
.item-title-group::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 2px;
    height: 100%; /* 제목 영역 높이만큼 */
    background: linear-gradient(to bottom, var(--panel-theme, #dfe6e9), transparent);
    transition: all 0.2s;
}

/* 호버 시 가로/세로선 동시 강조 및 페이드 유지 */
.detail-item:hover .item-title-group::before {
    background: linear-gradient(to right, var(--panel-theme, #2d3436), transparent) !important;
}
.detail-item:hover .item-title-group::after {
    background: linear-gradient(to bottom, var(--panel-theme, #2d3436), transparent) !important;
}


.detail-header {
    display: flex;
    justify-content: space-between;
    align-items: baseline;
    width: 100%;
}

.detail-name {
    display: inline-block;
    /* 배경이 텍스트만큼만 차지하도록 설정 */
    font-size: 0.9rem;
    font-weight: 700;
    color: #2d3436;
    padding: 2px 8px;
    /* 상하좌우 여백 */
    border-radius: 4px;
    /* 둥근 모서리 */
    background-color: color-mix(in srgb, var(--panel-theme, #dfe6e9) 15%, transparent);
    /* 테마색 15% 하이라이트 */
    transition: background-color 0.2s;
    /* 부드러운 색상 전환 효과 */
}

.detail-item:hover .detail-name {
    background-color: color-mix(in srgb, var(--panel-theme, #dfe6e9) 25%, transparent);
    /* 마우스 올리면 25%로 살짝 진하게 */
}

.detail-examples {
    font-size: 0.8rem;
    color: #636e72;
    font-weight: 500;
    text-align: right;
    margin-left: 10px;
    transition: opacity 0.5s ease-in-out;
    opacity: 1;
    word-break: keep-all;
}

/* [신규] 메타데이터(수치) 스타일 */
.meta-info {
    font-size: 0.8rem;
    color: var(--theme);
    /* 카드의 테마 색상을 따라감 */
    font-weight: 700;
    font-family: 'Inter', sans-serif;
    margin-top: 2px;
    margin-bottom: 2px;
    opacity: 0.9;
    display: flex;
    gap: 8px;
    align-items: center;
}

.meta-info {
    /* ... 기존 스타일 유지 ... */
    display: flex;
    gap: 6px;
    /* 이모지와 글자 사이 간격 살짝 조정 */
    align-items: center;
}

/* 이 줄은 지우거나 아래처럼 바꾸세요 */
.meta-info::before {
    content: none;
}

.detail-desc {
    font-size: 0.85rem;
    color: #7f8c8d;
    margin-top: 2px;
    line-height: 1.4;
    word-break: keep-all;
}

.full-list-container {
    display: none;
    text-align: right;
    font-size: 0.8rem;
    color: #636e72;
    margin-top: 4px;
    padding-top: 4px;
    border-top: 1px dashed rgba(0, 0, 0, 0.05);
    line-height: 1.6;
    animation: fadeIn 0.3s ease-out;
    word-break: keep-all;
}

.sub-region-card:hover .full-list-container,
.climate-sub-card:hover .full-list-container {
    display: block;
}

@keyframes fadeIn {
    from {
        opacity: 0;
        transform: translateY(-5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

i {
    font-style: normal;
    background-color: transparent;
    /* [수정] 배경을 투명하게 */
    padding: 2px 8px;
    /* 좌우 여백 살짝 조정 */
    border-radius: 4px;
    font-weight: 700;
    font-size: 0.7rem;
    /* [핵심 수정] em -> rem 으로 변경하여 절대 크기 고정 */
    color: var(--panel-theme, #2d3436);
    /* [수정] 글자색을 테마 색상으로 */
    margin-right: 3px;
    border: 1.5px solid var(--panel-theme, #dfe6e9);
    /* [수정] 테두리를 테마 색상으로 */
    vertical-align: 1px;
    cursor: pointer;
    /* 클릭 가능한 링크이므로 커서 변경 */
    transition: all 0.2s ease-out;
    white-space: nowrap;
    position: relative;
}

i:hover {
    background-color: var(--panel-theme, #2d3436);
    /* 배경을 테마 색상으로 채움 */
    color: #fff;
    transform: scale(1.05);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
    padding-right: 24px;
    /* 국기가 나올 공간을 다시 확보합니다. */
}

i::after {
    content: attr(data-flag);
    position: absolute;
    right: 6px;
    top: 50%;
    transform: translateY(-50%);
    opacity: 0;
    transition: opacity 0.2s;
    font-size: 1rem;
}

i:hover::after {
    opacity: 1;
}

i.term:hover {
    padding-right: 6px;
    /* 기존 24px에서 원래 padding 값으로 되돌림 */
    color: #fff;
    /* 글자색을 흰색으로 변경 */
    background-color: var(--panel-theme, #2d3436);
    /* 배경색을 패널 테마색으로 변경 */
}

i.term::after {
    content: none !important;
    /* 국기 이모지가 나타나지 않도록 강제 설정 */
}

.cap {
    font-size: 0;
    display: inline-block;
    vertical-align: middle;
    margin-left: 2px;
    position: relative;
    top: -1px;
}

.cap::after {
    content: '★';
    font-size: 0.75rem;
    color: #d63031;
    opacity: 0.9;
}

.separator {
    margin: 0 4px;
    color: #b2bec3;
}

.close-panel-btn {
    position: absolute;
    top: 25px;
    right: 25px;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    background: #fff;
    border: 1px solid rgba(0, 0, 0, 0.1);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    color: var(--text-secondary);
    transition: all 0.2s;
    z-index: 100;
}

.close-panel-btn:hover {
    background: #2d3436;
    color: #fff;
}

.detail-examples a,
.detail-panel .description a,
.full-list-container a {
    color: var(--text-secondary) !important;
    text-decoration: none;
    transition: all 0.2s ease-out;
}

.detail-examples a:hover,
.detail-panel .description a:hover,
.full-list-container a:hover {
    font-weight: 700;
    color: var(--panel-theme, #2d3436);
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.2);
    text-decoration: underline;
}

/* [기후 섹션 전용] 레이아웃 스타일 */
.climate-grid {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: 30px;
    padding: 50px 50px 600px 50px;
    max-width: 1200px;
    margin: 0 auto;
}

/* 1열 꽉 찬 카드 (E, D, A 기후) */
.climate-card-full {
    width: 100%;
    max-width: 800px;
    /* 너무 넓어지지 않게 제한 */
}

/* 2열 카드 컨테이너 (C, B 기후) */
.climate-row-half {
    display: flex;
    gap: 30px;
    width: 100%;
    max-width: 800px;
    justify-content: center;
}

.climate-card-half {
    flex: 1;
    /* 반반씩 차지 */
}

/* [v4.3 추가] 기후 섹션 전용 스타일 (3단 계층 구조) */

/* 1. 기후 섹션 메인 레이아웃: 완전 수직 배치 */
.climate-vertical-stack {
    display: flex;
    flex-direction: column;
    gap: 20px;
    max-width: 900px;
    margin: 0 auto;
    padding-bottom: 600px;
    /* 패널 공간 확보 */
}

/* 2. 기후 중분류 카드 (패널 내부용) */
.climate-sub-card {
    background: #fff;
    border-radius: 8px;
    border: 1px solid rgba(0, 0, 0, 0.08);
    margin-bottom: 15px;
    overflow: hidden;
    transition: all 0.3s ease;
    cursor: pointer;
}

.climate-sub-card:hover {
    border-color: var(--panel-theme);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
    transform: translateX(5px);
}

/* 중분류 헤더 (클릭 가능한 영역) */
.climate-sub-header {
    padding: 20px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: rgba(0, 0, 0, 0.01);
}

.climate-code {
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    font-size: 1.8rem;
    color: var(--panel-theme);
    margin-right: 15px;
    width: 60px;
}

.climate-name-group h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.climate-name-group p {
    margin: 4px 0 0 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.accordion-arrow {
    font-size: 0.8rem;
    color: var(--text-muted);
    transition: transform 0.3s ease;
}

/* 3. 아코디언 내용 영역 (기본 숨김) */
.climate-accordion-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    background: #fff;
}

/* 활성화 시 스타일 */
.climate-sub-card.expanded {
    border-color: var(--panel-theme);
    box-shadow: 0 8px 20px rgba(0, 0, 0, 0.08);
}

.climate-sub-card.expanded .accordion-arrow {
    transform: rotate(180deg);
    color: var(--panel-theme);
}

/* 아코디언 내부 리스트 스타일링 (기존 detail-list 재사용 + 패딩 조정) */
.climate-detail-wrapper {
    padding: 0 25px 25px 25px;
    border-top: 1px dashed rgba(0, 0, 0, 0.05);
    padding-top: 15px;
}

/* [v4.3 FINAL CSS] 기후 섹션 전용 스타일 */
.climate-vertical-stack {
    display: flex;
    flex-direction: column;
    gap: 30px;
    max-width: 900px;
    margin: 0 auto;
    padding-bottom: 600px;
}

.climate-sub-card {
    background: #fff;
    border-radius: 8px;
    border: 1px solid rgba(0, 0, 0, 0.08);
    margin-bottom: 15px;
    overflow: hidden;
    cursor: pointer;
    transition: all 0.2s;
}

.climate-sub-card:hover {
    border-color: var(--panel-theme);
    transform: translateX(5px);
}

.climate-sub-header {
    padding: 20px 25px;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.climate-code {
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    font-size: 1.8rem;
    color: var(--panel-theme);
    margin-right: 15px;
    width: 60px;
}

.climate-name-group h3 {
    margin: 0;
    font-size: 1.1rem;
    color: var(--text-primary);
}

.climate-name-group p {
    margin: 4px 0 0 0;
    font-size: 0.85rem;
    color: var(--text-secondary);
}

.accordion-arrow {
    transition: transform 0.3s ease;
    font-size: 0.8rem;
    color: var(--text-muted);
}

/* 핵심: 아코디언 내용 영역 */
.climate-accordion-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    background: #fff;
    opacity: 0;
    /* 닫혔을 때 내용 숨김 */
}

/* 열렸을 때 스타일 */
.climate-sub-card.expanded {
    border-color: var(--panel-theme);
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.05);
}

.climate-sub-card.expanded .accordion-arrow {
    transform: rotate(180deg);
    color: var(--panel-theme);
}

.climate-sub-card.expanded .climate-accordion-body {
    opacity: 1;
}

/* 열리면 내용 보임 */

.climate-detail-wrapper {
    padding: 0 25px 25px 25px;
    border-top: 1px dashed rgba(0, 0, 0, 0.05);
    padding-top: 15px;
}

/* [v5.9 Layout Fix] 메타데이터 그룹 레이아웃 유동화 */
.panel-criteria-group {
    display: grid;
    gap: 15px;
    padding: 20px 0;
    margin-bottom: 30px;
    border-bottom: 1px dashed rgba(0, 0, 0, 0.1);
    position: relative;
    
    /* [핵심] PC에서는 JS가 지정한 inline-style(개수에 따른 n열)을 따르도록 
       여기서는 grid-template-columns를 정의하지 않습니다. */
}

/* [모바일 대응] 화면이 좁을 때는 데이터 개수와 상관없이 강제로 2열 또는 1열로 변경 */
@media (max-width: 1024px) {
    .panel-criteria-group {
        /* !important로 JS 인라인 스타일을 덮어씌움 */
        grid-template-columns: repeat(2, 1fr) !important; 
    }
}

@media (max-width: 600px) {
    .panel-criteria-group {
        grid-template-columns: 1fr !important; /* 폰에서는 1열 */
    }
}

.criteria-item {
    display: flex;
    align-items: flex-start;
    gap: 12px;
}

.criteria-icon {
    width: 24px;
    height: 24px;
    flex-shrink: 0;
    margin-top: 2px;
    color: var(--panel-theme);
}

.criteria-content {
    display: flex;
    flex-direction: column;
}

.criteria-label {
    font-weight: 700;
    font-size: 0.8rem;
    color: var(--text-primary);
    margin-bottom: 4px;
}

.criteria-text {
    font-size: 0.9rem;
    color: var(--text-secondary);
    line-height: 1.6;
}

/* [개선 1] 아코디언 카드 테마 색상 적용 */
.climate-sub-card {
    border-left: 4px solid var(--panel-theme);
}

/* [개선 2] 기후 코드 뱃지 스타일 */
/* [수정 완료] 하위 기후 코드: 꽉 찬 네모 스타일 */
.climate-code {
    /* 글자 스타일 */
    font-family: 'Inter', sans-serif;
    font-weight: 900;
    font-size: 1.5rem;
    /* 글자 크기 적절히 조절 */
    line-height: 1.2;

    /* 핵심 디자인: 꽉 찬 네모 만들기 */
    background-color: var(--panel-theme);
    /* 배경을 카드 테마색으로 채움 */
    color: #ffffff;
    /* 글자를 흰색으로 (투명하게 뚫린 느낌) */

    /* 박스 모양 */
    padding: 5px 12px;
    /* 박스 안쪽 여백 */
    border-radius: 8px;
    /* 모서리 살짝 둥글게 */

    /* 위치 정렬 */
    display: inline-block;
    margin-right: 15px;
    min-width: 55px;
    /* 글자 수 달라도 너비 비슷하게 */
    text-align: center;
    /* 박스 안에서 글자 가운데 정렬 */
    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    /* 살짝 그림자 줘서 입체감 */
}

/* [요청사항 반영] 기후 패널 하위 항목 2열 그리드 스타일 */
/* [신규] 기후 카드의 1차 | 2차 | 3차 계층 시각화 */
.climate-classification-guide {
    display: flex;
    align-items: center;
    gap: 10px;
    /* 2차 분류 그룹과 수직선 사이의 간격 */
    margin-left: auto;

    /* 굵기와 크기 조정 */
    font-size: 0.9rem;
    font-family: 'Pretendard', sans-serif;
    /* Pretendard로 변경하여 굵기 통일성 확보 */
    font-weight: 500;
    /* 굵기 500으로 조정 */
    color: var(--text-secondary);
    transition: all 0.3s;
    line-height: 1.3;
    padding-right: 10px;
    height: 100%;
    /* 높이 확보 */
}

/* 2차 분류 그룹 (수직선 왼쪽에 위치) */
.climate-sub-group-2 {
    display: flex;
    flex-direction: column;
    text-align: right;
    /* 수직선에 붙도록 오른쪽 정렬 (밀착 정렬) */
    white-space: nowrap;
    min-width: 100px;
    /* 최소 너비 확보 */
}

/* 3차 분류 그룹 (수직선 오른쪽에 위치) */
.climate-sub-group-3 {
    display: flex;
    flex-direction: column;
    text-align: left;
    /* 수직선에 붙도록 왼쪽 정렬 (밀착 정렬) */
    white-space: nowrap;
    min-width: 100px;
    /* 최소 너비 확보 */
}

/* 수직 분리선 (|) */
.classification-separator {
    width: 2px;
    height: 60px;
    /* 높이 증가하여 텍스트 높이 커버 */
    background-color: rgba(0, 0, 0, 0.3);
    flex-shrink: 0;
}

/* 활성화 상태에서 텍스트 색상 강조 */
.region-card.active .climate-classification-guide {
    color: var(--text-primary);
}

.region-card.active .classification-separator {
    background-color: rgba(0, 0, 0, 0.5);
}

.region-card.active .classification-separator {
    background-color: rgba(0, 0, 0, 0.5);
}

/* 세부 구분 기호 그룹 (W/S, h/k 등) */
.climate-sub-group {
    display: flex;
    flex-direction: column;
    text-align: center;
    /* 텍스트 중앙 정렬 */
    white-space: nowrap;
}

/* 수직 분리선 (|) */
.classification-separator {
    width: 2px;
    /* 두께 증가 */
    height: 40px;
    /* 높이 유지 */
    background-color: rgba(0, 0, 0, 0.3);
    /* 색상 진하게 */
    flex-shrink: 0;
}

/* 활성화 상태에서 텍스트 색상 강조 */
.region-card.active .climate-classification-guide {
    color: var(--text-primary);
}

.region-card.active .classification-separator {
    background-color: rgba(0, 0, 0, 0.5);
}


/* 세부 구분 기호 그룹 (W/S, h/k 등) */
.climate-sub-group {
    display: flex;
    flex-direction: column;
    text-align: center;
    /* 텍스트 중앙 정렬 */
    white-space: nowrap;
}

/* 수직 분리선 (|) */
.classification-separator {
    width: 2px;
    /* 두께 증가 */
    height: 50px;
    /* 높이 증가 */
    background-color: rgba(0, 0, 0, 0.3);
    /* 색상 진하게 */
    flex-shrink: 0;
}

/* 활성화 상태에서 텍스트 색상 강조 (기존 유지) */
.region-card.active .climate-classification-guide {
    color: #000;
    /* 활성화 시 검은색으로 더 강조 */
}

.region-card.active .classification-separator {
    background-color: rgba(0, 0, 0, 0.5);
}


.climate-sub-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    gap: 15px;
    align-items: start;
    /* 카드 높이가 달라도 위쪽 정렬 */
}

/* [종교 섹션] 정보 패널 그리드 최적화 */
.panel-criteria-group {
    display: grid !important;
    /* 기존 flex 덮어쓰기 */
    gap: 15px;
}

/* 2. 기타 종교 (카드 내부): 2열로 좁게 배치 */
#card-religion-6 .sub-region-card .panel-criteria-group {
    grid-template-columns: repeat(2, 1fr);
    gap: 10px;
    margin-bottom: 20px !important;
    padding: 15px 0 !important;
    border-top: 1px dashed rgba(0, 0, 0, 0.08) !important;
    border-bottom: 1px dashed rgba(0, 0, 0, 0.08) !important;
}


/* [신규] 수직 온도 눈금선 스타일 - 우측 정렬 버전 ] */
/* 기존 right: calc(50% - 535px) 설정을 제거하고 left 기준으로 재배치 */
/* [수정됨] 온도 눈금선: 화면에 고정 (Fixed) */
#climate-scale {
    position: fixed;
    /* [핵심] 스크롤해도 따라오지 않고 화면에 박제 */
    top: 50%;
    /* 화면 세로 중앙 */
    transform: translateY(-50%);
    /* 정확한 중앙 정렬 */

    /* 900px 콘텐츠의 오른쪽 끝(450px)에서 40px 더 떨어진 곳 */
    left: calc(50% + 490px);
    right: auto;

    width: 150px;
    height: 60vh;
    /* 높이는 화면의 60% 정도가 적당 */
    font-size: 0.8rem;
    z-index: 100;
    /* 카드보다 위에 떠 있어야 함 */
    text-align: left;
    display: none;
    /* JS가 제어 */
    pointer-events: none;
    /* 클릭 통과 (방해 안 되게) */
}

/* 나머지 .scale-tick 등의 내부 스타일은 그대로 유지되므로 정상적으로 라인이 그려집니다. */

.scale-line {
    position: absolute;
    left: 0;
    top: 0;
    width: 2px;
    height: 100%;
    /* [수정] 그라데이션 방향 및 색상 순서 상하 반전 */
    background: linear-gradient(to top,
            #d63031 10%,
            /* 하단: 빨강 */
            #fdcb6e 35%,
            /* 중앙: 노랑 */
            #0984e3 65%,
            /* 상단: 파랑 */
            #74b9ff 90%
            /* 최상단: 하늘색 */
        );
    /* [수정] 그림자 확산 효과 상하 반전 */
    box-shadow: 0 0 10px rgba(116, 185, 255, 0.5),
        /* 최상단 (하늘색) 확산 */
        0 -100px 10px rgba(9, 132, 227, 0.4),
        /* 상단 (파랑) 확산 */
        0 -150px 10px rgba(253, 203, 110, 0.2),
        /* 중앙 (노랑) 확산 */
        0 -200px 15px rgba(214, 48, 49, 0.4);
    /* 하단 (빨강) 확산 */
    transition: all 0.5s ease;
}

.scale-tick {
    position: absolute;
    width: 100%;
    left: 15px;
    /* 텍스트를 선 오른쪽으로 띄움 */
    right: auto;
    text-align: left;
    display: flex;
    align-items: center;
}

.scale-tick::before {
    /* 눈금을 before로 사용하여 텍스트 오른쪽에 배치 */
    content: '';
    position: absolute;
    left: -15px;
    top: 50%;
    width: 10px;
    height: 2px;
    background-color: rgba(0, 0, 0, 0.3);
}

/* 기존 ::after는 삭제 또는 비활성화 */
.scale-tick::after {
    content: none !important;
}

.tick-label {
    font-weight: 700;
    color: var(--text-secondary);
    order: 2;
    /* 순서 변경: 레이블이 뒤로 이동 */
}

.tick-temp {
    margin-left: 0;
    /* Flexbox 정렬을 위해 기존 마진 제거 */
    color: var(--text-primary);
    font-family: 'Inter', sans-serif;
    font-weight: 600;
    order: 1;
    /* 순서 변경: 온도가 앞으로 이동 */
}

/* 온도 뒤에 콜론(:) 및 간격 추가 */
.tick-temp::after {
    content: ':';
    margin-right: 8px;
    /* 콜론 뒤 간격 추가 */
    font-weight: 600;
    color: var(--text-primary);
}

/* [기후 카드 전용] 헤더 내부 요소 정렬 및 공간 분배 */
[id^="card-climate-"] .card-header {
    display: grid;
    /* 1열: 1차 분류 텍스트 (40%) | 2열: 2차 분류 그룹 | 3열: 수직선 | 4열: 3차 분류 그룹 | 5열: 확장 아이콘 */
    /* 1차 분류에 40% 할당, 2/3차 분류에 남은 공간을 균등하게 할당 */
    grid-template-columns: 40% 1fr 2px 1fr 10%;
    align-items: center;
    gap: 0;
    padding-right: 30px;
}

/* 1차 분류 텍스트 (제목) */
[id^="card-climate-"] .header-content {
    grid-column: 1 / 2;
    width: 100%;
}

/* 2차 분류 그룹 (수직선 왼쪽에 붙음) */
[id^="card-climate-"] .climate-sub-group-2 {
    grid-column: 2 / 3;
    justify-self: flex-end;
    /* 그룹을 오른쪽 끝으로 밀어냄 */
    padding-right: 15px;
    /* 수직선과의 간격 확보 */
}

/* 수직선 */
[id^="card-climate-"] .classification-separator {
    grid-column: 3 / 4;
    justify-self: center;
    display: block !important;
    /* 모든 기후에서 수직선 강제 표시 */
}

/* 3차 분류 그룹 (수직선 오른쪽에 붙음) */
[id^="card-climate-"] .climate-sub-group-3 {
    grid-column: 4 / 5;
    justify-self: flex-start;
    /* 그룹을 왼쪽 끝으로 밀어냄 */
    padding-left: 15px;
    /* 수직선과의 간격 확보 */
}

/* 확장 아이콘 */
[id^="card-climate-"] .expand-icon {
    grid-column: 5 / 6;
    justify-self: flex-end;
}

/* E 기후 예외 처리 (3차 분류 텍스트가 없으므로 3차 분류 영역을 비워둠) */
#card-climate-e .climate-sub-group-2 {
    /* 2차 분류 영역은 그대로 2열에 유지 */
    grid-column: 2 / 3;
    justify-self: flex-end;
    text-align: right;
    padding-right: 15px;
}

#card-climate-e .climate-sub-group-3 {
    /* 3차 분류 영역은 비어있지만 공간과 수직선은 유지됨 */
    grid-column: 4 / 5;
    justify-self: flex-start;
    padding-left: 15px;
}

/* [추가] 기후 알파벳 박스 디자인 */
.climate-char-box {
    display: inline-block;
    border: 3px solid var(--theme);
    /* 카드의 테마 색상을 따라감 */
    color: var(--theme);
    /* 글자색도 테마 색상 */
    border-radius: 12px;
    /* 모서리 둥글게 */
    padding: 0px 10px;
    /* 박스 안쪽 여백 */
    margin-right: 8px;
    /* 박스와 뒤에 글자 사이 간격 */
    font-family: 'Inter', sans-serif;
    /* 숫자/영어 전용 폰트 */
    font-weight: 900;
    /* 아주 굵게 */
    line-height: 1.3;
    vertical-align: text-bottom;
    /* 옆 글자와 높이 맞춤 */
}

/* [수정] 지형 뱃지 스타일 (사이즈 축소) */
.geo-badge {
    display: inline-block;
    font-size: 0.5rem;
    /* 0.8 -> 0.5rem 축소 */
    font-weight: 700;
    color: #fff;
    background-color: var(--theme);
    padding: 1px 4px;
    /* 2px 8px -> 1px 4px 축소 */
    border-radius: 4px;
    margin-right: 5px;
    /* 8px -> 5px 축소 */
    vertical-align: middle;
    transform: translateY(-2px);
    letter-spacing: -0.02em;
    text-align: center;
}

/* [신규] 설명문 소문자 박스 디자인 (사이즈 축소) */
.guide-char {
    display: inline-block;
    background-color: var(--theme);
    /* 기존 유지 */
    color: #fff;
    /* 기존 유지 */
    font-family: 'Inter', sans-serif;
    /* 기존 유지 */
    font-weight: 700;
    /* 기존 유지 */

    /* [수정] 크기 관련 속성만 축소 */
    font-size: 0.7rem;
    /* 0.85rem -> 0.75rem */
    padding: 0px 5px;
    /* 1px 6px -> 0px 5px */
    min-width: 12px;
    /* 14px -> 12px */

    border-radius: 4px;
    /* 기존 유지 */
    margin-right: 4px;
    /* 기존 유지 */
    line-height: 1.2;
    /* 기존 유지 */
    text-align: center;
    /* 기존 유지 */
}

/* [긴급 교정] 가이드 텍스트 줄바꿈 및 정렬 해결 (간격 축소) */
.climate-sub-group-2 {
    display: flex;
    flex-direction: column;
    align-items: flex-start;
    /* 기존 유지 */
    justify-content: center;

    /* [수정] 줄 간격 축소 */
    gap: 2px;
    /* 4px -> 2px */

    padding-right: 10px;
    /* 기존 유지 */

    /* [추가] 그룹 전체 폰트 사이즈 축소 (상속) */
    font-size: 0.8rem;
}

.climate-sub-group-3 {
    display: flex;
    /* flex 명시 (안전장치) */
    flex-direction: column;
    /* 세로 정렬 명시 */
    align-items: flex-start;
    /* 기존 유지 */
    justify-content: center;

    /* [수정] 줄 간격 축소 */
    gap: 2px;
    /* 4px -> 2px */

    /* [추가] 그룹 전체 폰트 사이즈 축소 (상속) */
    font-size: 0.8rem;
}

/* 한 줄씩 묶어주는 래퍼 */
.guide-row {
    display: flex;
    align-items: center;
    /* 박스와 글자 수직 중앙 정렬 */
    gap: 6px;
    /* 박스와 글자 사이 간격 */
    white-space: nowrap;
    /* 글자 줄바꿈 금지 */
}

/* [긴급 수정] 기후 코드 강제 적용 스타일 */
.climate-code {
    /* 모양과 크기 */
    display: inline-block !important;
    min-width: 60px !important;
    padding: 4px 10px !important;
    border-radius: 8px !important;

    /* 색상: 배경은 테마색, 글자는 흰색 */
    background-color: var(--panel-theme, #2d3436) !important;
    color: #ffffff !important;

    /* 글자 스타일 */
    font-family: 'Inter', sans-serif !important;
    font-weight: 900 !important;
    font-size: 1.4rem !important;
    text-align: center !important;
    line-height: 1.2 !important;

    /* 위치 정렬 및 그림자 */
    margin-right: 12px !important;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.15) !important;
    vertical-align: middle !important;
}

/* [신규] 수권 전용: 강줄기(Streamline) 스타일 */
.stream-list {
    position: relative;
    padding-left: 20px;
    margin-top: 15px;
    border-left: 3px solid var(--theme, #0984e3);
    /* 강줄기 선 (테마색 따라감) */
}

.stream-item {
    position: relative;
    margin-bottom: 25px;
    padding-left: 25px;
}

.stream-item:last-child {
    margin-bottom: 0;
}

/* 물방울 포인트 (Drop) */
.stream-item::before {
    content: '';
    position: absolute;
    left: -29px;
    /* 선 위에 정확히 위치 */
    top: 6px;
    width: 15px;
    height: 15px;
    background: #fff;
    border: 3px solid var(--theme, #0984e3);
    border-radius: 50%;
    z-index: 1;
    transition: all 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
}

/* 마우스 올렸을 때 물방울이 차오르는 효과 */
.stream-item:hover::before {
    background: var(--theme, #0984e3);
    transform: scale(1.3);
}

/* 강 이름 텍스트 */
.stream-name {
    font-size: 1.1rem;
    font-weight: 800;
    color: var(--text-primary);
    display: block;
    margin-bottom: 4px;
    font-family: 'Noto Serif KR', serif;
}

/* 설명 텍스트 */
.stream-desc {
    font-size: 0.9rem;
    color: var(--text-secondary);
    line-height: 1.5;
    word-break: keep-all;
    display: block;
}

/* [신규] 지형 뱃지 스타일 */
.geo-badge {
    display: inline-block;
    font-size: 0.8rem;
    font-weight: 700;
    color: #fff;
    background-color: var(--theme);
    padding: 2px 8px;
    border-radius: 4px;
    margin-right: 8px;
    vertical-align: middle;
    transform: translateY(-2px);
    letter-spacing: -0.02em;
    text-align: center;
}

/* [신규] 담수(Freshwater) 전용 디자인: Deep Flow */
#freshwater-grid .region-card {
    border-left: none !important;
    /* 기존 단색 테두리 제거 */
    position: relative;
    overflow: hidden;
    /* 띠지가 둥근 모서리를 넘치지 않게 */
}

/* 그라데이션 띠지 생성 */
#freshwater-grid .region-card::after {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 6px;
    /* 띠지 두께 */
    /* 위쪽은 카드의 테마색, 아래쪽은 깊은 심해색(#0c2461)으로 떨어지는 그라데이션 */
    background: linear-gradient(to bottom, var(--theme), #0c2461);
    z-index: 5;
}

/* 배경 물결 패턴 애니메이션 (선택 사항: 은은하게 움직임) */
@keyframes waveFloat {
    0% {
        transform: translateY(0);
    }

    50% {
        transform: translateY(-5px);
    }

    100% {
        transform: translateY(0);
    }
}

/* [재수정] 담수 아이콘 색상 심화: 면(Fill)과 선(Stroke) 동시 적용 */
#freshwater-grid .card-bg-icon {
    right: -20px;
    bottom: -20px;
    left: auto;
    width: 180px;
    height: 180px;
    opacity: 0.5 !important;
    /* 투명도 0.4 -> 0.5로 상향하여 더 선명하게 */
    color: var(--theme) !important;
    /* [핵심] 이것이 면과 선의 색을 동시에 지배합니다 */
    fill: currentColor !important;
    /* 내부 요소들이 위에서 설정한 color를 따르도록 강제 */
}

/* [신규] 대양과 바다(Ocean) 섹션 전용 디자인 */
/* 규칙 1: 아이콘에 테마 색상 적용 */
#ocean-grid .card-bg-icon {
    right: -20px;
    bottom: -20px;
    left: auto;
    width: 180px;
    height: 180px;
    opacity: 0.5 !important;
    color: var(--theme) !important;
    fill: currentColor !important;
}

/* 규칙 2: 하단에 수평 그라데이션 Flow 추가 */
#ocean-grid .region-card {
    position: relative;
    overflow: hidden;
}

#ocean-grid .region-card::after {
    content: '';
    position: absolute;
    left: 0;
    right: 0;
    bottom: 0;
    height: 6px;
    /* 수평 띠의 두께 */
    /* 아래쪽은 깊은 심해색(#0c2461), 위쪽은 카드의 테마색으로 변하는 그라데이션 */
    background: linear-gradient(to top, #0c2461, var(--theme));
    z-index: 5;
}

/* [최종 정리] 겹치는 아이콘 제거 및 종교 섹션 디자인 통합 */

/* 1. 패널 내부 유령 아이콘 (중첩 문제) 제거 - 모든 섹션 */
.panel-bg-icon {
    display: none !important;
}

/* 2. 종교 카드 배경 아이콘 숨기기 (겹치는 회색 이미지) */
#religion-grid .card-bg-icon {
    display: none !important;
}

/* 3. 종교 카드 경전 스타일 이중선 테두리 적용 (8px) */
#religion-grid .region-card {
    border-left-width: 8px !important;
    border-left-style: double !important;
    border-left-color: var(--theme) !important;
}

/* -------------------------------------- */
/* [신규] 용어 링크(종교, 특수지형) 밑줄 제거 및 스타일 정리 */
.detail-name a,
.criteria-text a {
    text-decoration: none !important;
    /* 밑줄 제거 */
    color: inherit !important;
    /* 글자색 상속 */
    border-bottom: none !important;
    /* 혹시 모를 테두리 제거 */
}

/* 링크 호버 시에도 밑줄 생기지 않도록 방지 (배경색 반전 효과만 유지) */
.detail-name a:hover,
.criteria-text a:hover {
    text-decoration: none !important;
}

/* [신규] 우하단 플로팅 검색창 스타일 */
.floating-search {
    position: fixed;
    bottom: 30px;
    right: 30px;
    z-index: 2000;
    /* 최상위 노출 */
    background: rgba(255, 255, 255, 0.6);
    /* 평소엔 반투명 */
    backdrop-filter: blur(10px);
    border-radius: 50px;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    display: flex;
    align-items: center;
    padding: 10px;
    width: 50px;
    /* 접힌 상태 너비 (정사각형) */
    height: 50px;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.25, 1, 0.5, 1);
    border: 1px solid rgba(0, 0, 0, 0.05);
}

/* 마우스 올렸을 때 & 입력 중일 때 확장 */
.floating-search:hover,
.floating-search:focus-within {
    width: 320px;
    /* 길게 늘어남 */
    background: #ffffff;
    /* 완전 불투명 흰색 */
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.search-icon {
    font-size: 1.2rem;
    min-width: 30px;
    text-align: center;
    cursor: default;
    opacity: 0.7;
}

.search-input {
    border: none;
    background: transparent;
    outline: none;
    font-size: 1rem;
    color: var(--text-primary);
    margin-left: 10px;
    width: 100%;
    font-family: 'Pretendard', sans-serif;
    opacity: 0;
    /* 접혔을 땐 글자 숨김 */
    transition: opacity 0.3s ease;
}

/* 확장되면 입력창 글자 보임 */
.floating-search:hover .search-input,
.floating-search:focus-within .search-input {
    opacity: 1;
}

/* [제안 2] 도트 세퍼레이터 */
.dropdown-menu .tab-btn:not(:last-child)::after {
    content: ' • ';
    /* 점 문자 */
    position: absolute;
    right: -10px;
    /* 위치 */
    top: 50%;
    transform: translateY(-50%);
    color: #b2bec3;
    /* 연한 회색 */
    font-size: 0.8rem;
}

/* [복구] 검색어 하이라이트 (노란 형광펜 효과) */
.search-highlight {
    background-color: #ffeaa7;
    color: #2d3436;
    border-radius: 2px;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
    font-weight: bold;
}

/* [신규] 준비중 페이지 스타일 */
.preparing-wrap {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    height: 50vh;
    text-align: center;
    color: var(--text-secondary);
    animation: fadeIn 0.5s ease-out;
}

.preparing-icon {
    font-size: 4rem;
    margin-bottom: 20px;
    opacity: 0.3;
    filter: grayscale(100%);
}

.preparing-title {
    font-family: 'Noto Serif KR', serif;
    font-size: 2rem;
    font-weight: 700;
    margin-bottom: 10px;
    color: var(--text-primary);
}

/* [신규] 메뉴 아이콘 스타일 (회색조) */
.menu-icon {
    filter: grayscale(100%);
    /* 흑백 처리 */
    opacity: 0.7;
    /* 약간 투명하게 */
    margin-right: 6px;
    /* 글자와 간격 */
    font-style: normal;
    /* 이모지 기울임 방지 */
    font-size: 1.1em;
    /* 글자보다 살짝 크게 */
    vertical-align: -1px;
    /* 높이 보정 */
    transition: all 0.3s;
}

/* 마우스 올리면 컬러로 살아나게 (선택 사항 - 원치 않으시면 삭제 가능) */
button:hover .menu-icon,
button.active .menu-icon {
    filter: grayscale(0%);
    opacity: 1;
}

/* [수정됨] 기후 그래프 전용 스타일 */
.climate-graph-box {
    /* 핵심: 현재 테마색(빨강, 노랑 등)을 15%만 남기고 검은색을 섞어 아주 어둡고 탁하게 만듦 */
    background-color: color-mix(in srgb, var(--panel-theme) 30%, #151515);

    border-radius: 12px;
    /* 둥근 모서리 */
    padding: 20px 10px;
    /* 위아래 여백 20px, 좌우 여백 10px */
    margin-bottom: 25px;
    /* 아래쪽 간격 */
    text-align: center;
    /* 가운데 정렬 */

    /* 안쪽으로 그림자를 줘서 움푹 들어간 느낌 (그래프가 더 잘 보임) */
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.5);
    border: 1px solid rgba(255, 255, 255, 0.1);
    /* 살짝 밝은 테두리 */
}

.climate-graph-img {
    /* 그래프 크기 조정 */
    width: auto;
    /* 가로 비율 자동 */
    max-width: 100%;
    /* 화면을 넘치지 않게 */
    height: auto;
    /* 세로 비율 자동 */
    max-height: 450px;
    /* 너무 길어지지 않게 제한 (모바일 배려) */

    /* [중요] 흐릿한 회색 그래프를 선명하게 만드는 보정 필터 */
    filter: brightness(1.2) contrast(1.1) drop-shadow(0 0 2px rgba(0, 0, 0, 0.5));
}

.graph-caption {
    display: block;
    margin-top: 12px;
    font-size: 0.9rem;
    font-weight: 600;
    /* 어두운 배경이므로 글자는 밝은 흰색 계열로 변경 */
    color: rgba(255, 255, 255, 0.9);
    font-family: 'Pretendard', sans-serif;
}

/* [신규] 기후 지도 레이아웃 스타일 */
.panel-criteria-group {
    position: relative;
    /* 버튼 위치 기준점 */
    transition: all 0.3s cubic-bezier(0.25, 1, 0.5, 1);
}

/* 지도 토글 버튼 (1시 방향) */
.map-toggle-btn {
    position: absolute;
    top: 0;
    right: 0;
    background: transparent;
    border: 1px solid var(--panel-theme);
    color: var(--panel-theme);
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    z-index: 10;
    display: flex;
    align-items: center;
    gap: 5px;
}

.map-toggle-btn:hover {
    background: var(--panel-theme);
    color: #fff;
}

/* 지도 영역 (기본 숨김) */
.climate-map-area {
    display: none;
    /* 평소엔 숨김 */
    width: 0;
    opacity: 0;
    transition: all 0.4s ease;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.climate-map-img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    /* 영역 꽉 채우기 */
    display: block;
}

/* [핵심] 지도가 펼쳐졌을 때의 레이아웃 변경 */
.panel-criteria-group.map-open {
    display: grid !important;
    /* 강제 그리드 전환 */
    grid-template-columns: 4fr 6fr;
    /* 텍스트 40% : 지도 70% */
    gap: 20px;
    align-items: start;
}

.panel-criteria-group.map-open .climate-map-area {
    display: block;
    width: 100%;
    opacity: 1;
    grid-column: 2;
    /* 오른쪽 배치 */
    grid-row: 1 / span 3;
    /* 텍스트 높이에 맞춰 늘어남 */
}

/* 텍스트 줄바꿈 개선 */
.criteria-text {
    word-break: keep-all;
    /* 어절 단위 줄바꿈 */
    line-height: 1.5;
}

/* [최종 완성 v9] 세계의 권역 스타일 (심해 그라데이션 배경) */
#section-geo.active {
    position: relative;
    /* [수정] 상단: 깊은 바다색(#1a2a6c) -> 하단: 완전 검정(#000000) */
    /* 스크롤을 내릴수록 점점 어두워지는 심해 효과 */
    background: linear-gradient(to bottom, #1a2a6c 0%, #0a0e17 40%, #000000 100%) !important;
    background-attachment: fixed;
}

/* 1. 배경 지도 (위치 조정, 유지 & png 변경) */
.geo-bg-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 120vh;
    background-image: url('images/world-map-clear.webp');
    background-size: cover;
    /* 초기 크기 */
    background-repeat: no-repeat;
    background-position: center 85%;
    /* 초기 위치 */
    z-index: 0;

    /* [수정] 움직임을 영화처럼 부드럽게 (1.2초 동안 이동) */
    transition: background-position 1.2s cubic-bezier(0.22, 1, 0.36, 1),
        background-size 1.2s cubic-bezier(0.22, 1, 0.36, 1),
        filter 0.3s linear;
    will-change: background-position, background-size;
}

/* 2. 어두운 막 (초기값 완전 투명) */
.geo-dim-layer {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    background: rgba(0, 0, 0, 0);
    opacity: 1;
    z-index: 1;
    pointer-events: none;
    transition: background 0.3s ease;
}

/* 3. 제목 영역 */
.geo-hero-title {
    position: relative;
    z-index: 2;
    text-align: center;
    height: 55vh;
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    align-items: center;
    padding-top: 175px;
}

.geo-hero-title h1 {
    font-family: 'Noto Serif KR', serif;
    font-size: 4rem;
    margin: 0;
    color: #ffffff;
    text-shadow: 0 0 30px rgba(0, 20, 175, 0.8), 0 0 40px rgba(0, 0, 0, 0.6);
    background: none;
}

.geo-hero-title p:first-of-type {
    font-size: 1.2rem;
    margin-top: 10px;
    color: #ffffff;
    font-weight: 500;
    text-shadow: 0 0 15px rgba(0, 20, 175, 0.9), 0 0 20px rgba(0, 0, 0, 0.7);
}

.geo-hero-title p:last-of-type {
    font-size: 1.1rem !important;
    margin-top: 40px !important;
    opacity: 1 !important;
    color: #fff;
    font-weight: 700;
    text-shadow: 0 0 15px rgba(0, 20, 175, 1), 0 0 20px rgba(0, 0, 0, 0.8);
    animation: bounce 2s infinite;
}

@keyframes bounce {

    0%,
    20%,
    50%,
    80%,
    100% {
        transform: translateY(0);
    }

    40% {
        transform: translateY(-10px);
    }

    60% {
        transform: translateY(-5px);
    }
}

/* 4. 카드 컨테이너 */
#section-geo.active .grid-container {
    position: relative;
    z-index: 5;
    background: none;
    padding-top: 50px;
}

/* [신규] 기후 그래프 토글 버튼 스타일 */
.graph-toggle-btn {
    display: block;
    width: 150px;
    margin: 0 auto 25px;
    /* 중앙 정렬 및 아래쪽 간격 */
    padding: 8px 16px;
    border-radius: 25px;
    font-size: 0.9rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;

    /* 기본 상태 (테두리 버튼) */
    background: transparent;
    border: 2px solid var(--panel-theme);
    color: var(--panel-theme);
}

/* 활성화 상태 (꽉 찬 버튼) */
.graph-toggle-btn.active {
    background: var(--panel-theme);
    color: #fff;
}

/* 그래프를 감싸는 컨테이너 (기본 숨김) */
.graph-container {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.25, 1, 0.5, 1);
}

#section-geo.active .detail-panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(248, 249, 250, 0.7);
    backdrop-filter: blur(15px);
    z-index: -1;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.2);
    box-shadow: 0 30px 60px rgba(0, 0, 0, 0.3);
}

/* [전역 스타일] 모든 패널에 '반투명 유리' 컨셉 적용 */

/* 1. 모든 패널의 배경(외곽부)을 반투명하게 만듭니다. */
.detail-panel {
    background: transparent !important;
    border: none !important;
    box-shadow: none !important;
}

/* [수정된 코드 - 이걸로 덮어쓰세요] */
.detail-panel::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    /* 순수 흰색 비중을 높여 밝기 확보 (투명도를 0.75로 낮춰도 밝게 유지됨) */
    background: rgba(255, 255, 255, 0.75);
    /* 배경을 조금 더 진하게 해서 깜빡임 방지 */

    /* 평소(움직일 때)에는 블러를 끕니다 -> 렉 제거 핵심 */
    backdrop-filter: none;
    -webkit-backdrop-filter: none;

    z-index: -1;
    border-radius: 12px;
    border: 1px solid rgba(255, 255, 255, 0.3);
    box-shadow: 0 30px 60px rgba(0, 20, 100, 0.4);

    /* 블러 효과가 켜질 때 부드럽게 변하도록 설정 */
    transition: backdrop-filter 0.3s ease;
}

/* 패널이 완전히 열렸을 때만 블러를 켭니다 */
.detail-panel.open::before {
    backdrop-filter: blur(3px);
    -webkit-backdrop-filter: blur(3px);
}

.sub-region-card {
    /* 푸른 기를 빼고 순수 흰색 투명도로 교체 */
    background: rgba(240, 244, 250, 0.6) !important;
    backdrop-filter: blur(2px);
    border: 1px solid rgba(255, 255, 255, 0.4) !important;
}

/* [수정] '권역' 섹션의 중분류 카드에만 '반투명 유리' 효과 적용 */
#section-geo.active .sub-region-card {
    background: rgba(255, 255, 255, 0.75) !important;
    /* !important로 다른 규칙 덮어쓰기 */
    backdrop-filter: blur(4px);
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
}

/* [수정] '대양과 바다' 섹션 전용 캔버스 배경 스타일 v3 */

/* 1. 섹션 자체는 투명하게 만들어, 뒤의 body 배경이 보이게 함 */
#section-ocean.active {
    position: relative;
    background: transparent !important;
    /* 배경 제거 (핵심) */
    padding-top: 60px;
    padding-bottom: 60px;
}

/* 2. 비네팅 효과는 그대로 유지 */
#section-ocean.active::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: radial-gradient(ellipse at center, transparent 40%, rgba(10, 20, 60, 0.7) 100%);
    z-index: 1;
    pointer-events: none;
}


/* 4. 카드 배경은 불투명하게 유지 */
#section-ocean.active .region-card {
    background-color: #fff;
}

/* [신규] '세계의 대지형' 섹션 전용 캔버스 스타일 */

/* 1. 섹션 자체는 투명하게 만들어, 뒤의 body 배경이 보이게 함 */
#section-terrain.active {
    background: transparent !important;
    padding-top: 60px;
    padding-bottom: 60px;
}

/* 3. 캔버스 내부 카드 배경은 불투명하게 유지 */
#section-terrain.active .region-card {
    background-color: var(--card-bg-inactive);
}

/* [통합] 대지형 & 대양 섹션 캔버스/비네팅 스타일 */

/* [수정] 모든 페이지에 비네팅 효과를 적용하되, 헤더는 제외 */
body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;

    /* 비네팅 그라데이션 (기존 값 유지) */
    background: radial-gradient(ellipse at center,
            transparent 10%,
            rgba(5, 10, 40, 0.9) 100%);

    z-index: -1;
    /* [핵심] 헤더(1000)보다 훨씬 아래, 배경보다는 위에 위치 */
    pointer-events: none;
    /* 마우스 클릭 통과 */
}

/* [전역 통합] 배경 이미지를 사용하는 모든 섹션 투명화 */
#section-terrain.active,
#section-ocean.active,
#section-maps.active,
#section-special.active,
#section-freshwater.active,
#section-climate.active,
#section-agriculture.active,
#section-livestock.active,
#section-resources.active,
#section-industry.active,
#section-city.active,
#section-language.active,
#section-religion.active,
#section-energy.active,
#section-population.active,
#section-disease.active,
#section-history.active,
#section-change.active

/* [추가됨] 쉼표(,) 주의 */
    {
    background: transparent !important;
}

/* [수정] 카드 배경을 투명하게 풀어주어 유리 효과 적용 (단, 활성 카드는 제외) */
#section-terrain.active .region-card:not(.active),
#section-ocean.active .region-card:not(.active),
#section-maps.active .region-card:not(.active),
#section-special.active .region-card:not(.active),
#section-freshwater.active .region-card:not(.active),
#section-agriculture.active .region-card:not(.active),
#section-livestock.active .region-card:not(.active),
#section-resources.active .region-card:not(.active),
#section-industry.active .region-card:not(.active),
#section-city.active .region-card:not(.active),
#section-language.active .region-card:not(.active),
#section-religion.active .region-card:not(.active),
#section-energy.active .region-card:not(.active),
#section-population.active .region-card:not(.active),
#section-bio.active .region-card:not(.active),
#section-history.active .region-card:not(.active),
#section-change.active .region-card:not(.active) {
    /* 평상시(비활성) 카드만 투명하게 */
    background-color: transparent !important;
}

/* [신규] 기후 섹션 전용: 평상시 반투명 유지 (가독성 확보) */
#section-climate.active .region-card:not(.active) {
    background: linear-gradient(145deg, rgba(255, 255, 255, 0.98) 0%, rgba(255, 255, 255, 0.7) 100%) !important;
    backdrop-filter: blur(12px) !important;
}

/* [신규] 홈 화면 전용 배경 및 텍스트 스타일 */

/* 1. 홈 화면 배경 이미지 설정 */


/* 2. 홈 화면 제목(h1)을 흰색 + 그림자 효과로 변경 (권역 스타일 참조) */
#section-home.active .home-title {
    color: #ffffff;
    text-shadow: 0 0 30px rgba(0, 20, 175, 0.8), 0 0 40px rgba(0, 0, 0, 0.6);
}

/* 3. 홈 화면 설명(p)도 동일하게 변경 */
#section-home.active .home-desc {
    color: #ffffff;
    font-weight: 500;
    /* 가독성을 위해 살짝 굵게 */
    text-shadow: 0 0 15px rgba(0, 20, 175, 0.9), 0 0 20px rgba(0, 0, 0, 0.7);
}

/* [신규] '세계의 기후' 섹션 배경 투명화 */
#section-climate.active {
    background: transparent !important;
}

/* [수정] 기후 온도 눈금선 가독성 강화 (흰색 글씨 + 그림자) */

/* 1. 눈금선 전체 글씨 색상을 흰색 계열로 변경 */
#climate-scale .tick-label,
#climate-scale .tick-temp,
#climate-scale .tick-temp::after {
    color: #fff !important;
}

/* 2. 모든 글씨에 어두운 그림자를 추가하여 배경과 분리 */
#climate-scale .tick-label,
#climate-scale .tick-temp {
    text-shadow: 0 1px 5px rgba(0, 0, 0, 0.8), 0 0 10px rgba(0, 0, 0, 0.5);
}

/* 3. [수정] 눈금선(tick) 색상도 흰색 + 그림자로 변경 */
#climate-scale .scale-tick::before {
    background-color: #fff;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

/* [신규] 배경 보기 버튼 및 모달 스타일 */
.bg-view-btn {
    position: fixed;
    bottom: 30px;
    left: 30px;
    /* 좌하단 배치 */
    z-index: 2000;
    /* 검색창과 동급 */
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: var(--text-primary);
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.bg-view-btn:hover {
    background: #fff;
    transform: scale(1.1);
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
}

.bg-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.7);
    /* 거의 불투명한 검정 */
    z-index: 9999;
    /* 최상위 (비네팅보다 위) */
    display: none;
    /* 기본 숨김 */
    align-items: center;
    justify-content: center;
    opacity: 0;
    transition: opacity 0.3s ease;
    cursor: zoom-out;
}

.bg-modal.show {
    display: flex;
    opacity: 1;
}

.bg-modal img {
    max-width: 95%;
    max-height: 95%;
    object-fit: contain;
    /* 비율 유지하며 꽉 채움 */
    box-shadow: 0 0 50px rgba(0, 0, 0, 0.5);
    border-radius: 4px;
    cursor: default;
}

.bg-modal-close {
    position: absolute;
    top: 30px;
    right: 30px;
    background: transparent;
    border: none;
    color: #fff;
    font-size: 2rem;
    cursor: pointer;
    opacity: 0.7;
    transition: opacity 0.2s;
}

.bg-modal-close:hover {
    opacity: 1;
}


/* [최종 수정] 배경 모달 텍스트 스타일 (박스 제거, 그림자 강조) */
.bg-modal-text {
    position: absolute;
    top: 15%;
    left: 50%;
    transform: translateX(-50%);
    text-align: center;
    z-index: 20000 !important;
    pointer-events: none;
    width: 100%;
}

.bg-modal-text h2 {
    font-family: 'Noto Serif KR', serif;
    font-size: 3rem;
    /* 글자 크기 대폭 확대 */
    font-weight: 900;
    color: #ffffff;
    margin: 0 0 10px 0;

    /* [핵심] 박스 배경 없음. 대신 진한 그림자로 가독성 확보 */
    background: none !important;
    text-shadow: 0 0 30px rgba(0, 20, 100, 0.9), 0 0 10px black;

    padding: 0;
    border-radius: 0;
    box-shadow: none;
}

.bg-modal-text p {
    font-family: 'Pretendard', sans-serif;
    font-size: 1.2rem;
    font-weight: 700;
    color: #ffffff;
    margin: 0;

    /* [핵심] 박스 배경 없음 */
    background: none !important;
    text-shadow: 0 0 20px rgba(0, 0, 0, 0.9), 0 0 5px black;

    padding: 0;
    border-radius: 0;
}



/* [신규] 나침반 버튼 스타일 */
.map-reset-btn {
    position: fixed;
    bottom: 90px;
    /* 눈 버튼(30px) 위에 배치 */
    left: 30px;
    z-index: 2000;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    font-size: 1.8rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: none;
    /* 평소엔 숨김 */
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
}

.map-reset-btn:hover {
    background: #fff;
    transform: rotate(-45deg);
    /* 마우스 올리면 나침반이 살짝 돔 */
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
}

/* [핵심] '세계의 권역' 섹션이 켜졌을 때만 버튼 보이기 */
body:has(#section-geo.active) .map-reset-btn {
    display: flex;
}

/* [수정됨] 전역 카드 네비게이션 버튼 스타일 (가시성 개선) */
.global-nav-btn {
    position: fixed;
    top: 50%;
    transform: translateY(-50%);
    z-index: 1500;
    width: 50px;
    height: 90px;
    border-radius: 8px;
    background: rgba(0, 0, 0, 0.5);
    /* 0.4 -> 0.5로 배경 진하게 */
    color: #fff;
    font-size: 1.5rem;
    /* 아이콘 크기 살짝 조정 */
    font-weight: bold;
    border: 1px solid rgba(255, 255, 255, 0.2);
    cursor: pointer;
    opacity: 0.8;
    /* 0.6 -> 0.8로 더 불투명하게 */
    transition: all 0.2s ease;
    display: none;
    text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    /* [추가] 아이콘 그림자 */
}

.global-nav-btn:hover {
    opacity: 1;
    background: rgba(0, 0, 0, 0.8);
    /* 호버 시 더 진하게 */
    transform: translateY(-50%) scale(1.05);
    /* 살짝 커지는 효과 */
}

.global-nav-btn.prev {
    left: 30px;
}

.global-nav-btn.next {
    right: 30px;
}

.global-nav-btn:hover {
    opacity: 1;
    background: rgba(0, 0, 0, 0.7);
}

.global-nav-btn.prev {
    left: 30px;
}

.global-nav-btn.next {
    right: 30px;
}

/* [신규] 권역 섹션에서만 배경 지도 블러 효과 강제 제거 */
body:has(#section-geo.active) .geo-bg-layer {
    filter: none !important;
}

/* [신규] 패널 닫힘 애니메이션 효과 */
.detail-panel.closing {
    opacity: 0;
    transform: translateY(-10px);
    transition: opacity 0.3s ease-out, transform 0.3s ease-out, max-height 0.4s cubic-bezier(0.6, 0, 0.4, 1);
}

/* [완벽 수정] 겹쳐진 단축키 버튼 스타일 (위치 및 노출 오류 수정) */
.bg-view-btn {
    /* --- 위치 및 기본 스타일 --- */
    position: fixed;
    /* [수정] 화면에 고정 */
    bottom: 30px;
    left: 30px;
    z-index: 2000;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    /* 원형 복귀 */
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);

    /* --- 내부 아이콘 정렬 및 노출 --- */
    display: flex;
    /* [수정] 항상 보이도록 기본 설정 (JS가 제어함) */
    align-items: center;
    justify-content: center;
    padding: 0;
}

.bg-view-btn:hover {
    background: #fff;
    transform: scale(1.1);
    box-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
}

.bg-view-btn .btn-icon {
    font-size: 1.5rem;
    line-height: 1;
}

.btn-shortcut-overlay {
    position: absolute;
    right: 5px;
    bottom: 5px;

    font-size: 0.8rem;
    font-weight: 900;
    color: var(--text-main);
    background: rgba(255, 255, 255, 0.7);
    border-radius: 4px;
    padding: 1px 5px;
    line-height: 1;
    border: 1px solid rgba(0, 0, 0, 0.1);
}

/* [최종] 홈 화면 애니메이션 배경 (4단계 파노라마 이동) */
.home-section {
    position: relative;
    overflow: hidden;
    width: 100%;
    height: 100vh;
}

.home-animated-bg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: -1;

    background-image: url('images/world-map-main.webp');
    background-size: cover;
    background-position: center;

    /* 동선이 길어서 시간을 40초로 늘려 부드럽게 만듦 */
    animation: kenburns 240s ease-in-out infinite alternate;
    will-change: transform;
}

/* 
   [좌표 설명]
   translate X축: (-)는 왼쪽 이동(오른쪽 보여줌), (+)는 오른쪽 이동(왼쪽 보여줌)
   translate Y축: (-)는 위로 이동(아래쪽 보여줌), (+)는 아래로 이동(위쪽 보여줌)
*/
@keyframes kenburns {

    /* 1단계: 동아시아 (우측 상단) */
    0% {
        transform: scale(1.0) translate(0%, 0%);
    }

    16% {
        transform: scale(1.7) translate(0%, 0%);
    }

    32% {
        transform: scale(2.5) translate(-31%, 16%);
    }

    /* 2단계: 동남아시아 및 오세아니아 (우측 하단) - 가장 크게 줌인 */
    48% {
        transform: scale(2.2) translate(-27%, -10%);
    }

    /* 3단계: 서남아시아, 유럽, 아프리카 (중앙) - 약간 줌아웃 */
    64% {
        transform: scale(2.6) translate(-8%, 9%);
    }

    80% {
        transform: scale(3.3) translate(2%, 23%);
    }

    /* 4단계: 아메리카 (좌측) - 가장 넓게 줌아웃 */
    100% {
        transform: scale(1.8) translate(15%, 0%);
    }
}

/* [신규] 기후 섹션 전용: 카드가 열리면 배경 블러 처리 */

/* 1. 기후 섹션이 활성화되면 블러용 막(Layer)을 미리 준비 (투명 상태) */
body:has(#section-climate.active)::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100vh;
    z-index: 0;
    /* 배경(body)보다는 앞, 카드(z-index:1)보다는 뒤 */
    pointer-events: none;
    /* 마우스 클릭 통과 */

    backdrop-filter: blur(0px);
    /* 평소엔 블러 없음 */
    transition: backdrop-filter 0.5s ease;
    /* 0.5초 동안 부드럽게 변함 */
}

/* 2. 패널(.detail-panel.open)이 열리는 순간 블러 강도를 높임 */
body:has(#section-climate.active):has(.detail-panel.open)::before {
    backdrop-filter: blur(8px);
    /* 블러 강도 (취향껏 조절: 5px ~ 10px 추천) */
}

/* [최종 해결책] 에너지 섹션 배경 이미지 강제 적용 (JS 무시) */
body:has(#section-energy.active) {
    background-image: url('images_human/energy.webp') !important;
    background-size: cover !important;
    background-position: center !important;
    background-attachment: fixed !important;
}

/* [신규] sub-region-card 아코디언 기능 */
.sub-region-card .accordion-body {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.4s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.3s;
    opacity: 0;
}

.sub-region-card.expanded .accordion-body {
    max-height: 500px;
    /* 충분한 높이 */
    opacity: 1;
}

.sub-region-card .accordion-arrow {
    transition: transform 0.3s ease;
}

.sub-region-card.expanded .accordion-arrow {
    transform: rotate(180deg);
}

/* [기후 섹션 전용] 식생/토양 카드 높이 정렬 해제 (엿가락 방지) */
#section-climate .panel-grid {
    align-items: start;
}

/* [신규] 대기 대순환 띠 및 토글 버튼 스타일 */
#climate-bands-toggle {
    position: fixed;
    top: 135px;
    /* 헤더 바로 아래 */
    left: 30px;
    z-index: 100;
    width: 50px;
    height: 50px;
    border-radius: 50%;
    background: rgba(255, 255, 255, 0.2);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    font-size: 1.5rem;
    cursor: pointer;
    transition: all 0.3s ease;
    display: none;
    /* 평소엔 숨김 (JS로 제어) */
    align-items: center;
    justify-content: center;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);

    /* [추가] 둥둥 떠다니는 애니메이션 적용 (2초 간격 무한 반복) */
    animation: bounce 2s infinite;
}

/* [추가] 마우스를 올리거나 활성화되면 얌전해지도록 설정 */
#climate-bands-toggle:hover,
#climate-bands-toggle.active {
    animation: none;
    /* 호버 시 애니메이션 멈춤 */
    transform: scale(1.1);
    /* 호버 효과 유지 */
}

#climate-bands-toggle.active {
    background: #fff;
    transform: rotate(90deg);
    /* 활성 시 회전 유지 */
}

#atmospheric-bands-container {
    position: absolute;
    top: 120px;
    /* [수정] 헤더 아래로 위치 이동 */
    left: 0;
    width: 100%;
    height: calc(100% - 120px);
    /* [수정] 전체 높이도 그만큼 줄여줌 */
    z-index: 0;
    /* 카드보다 아래에 위치 */
    pointer-events: none;
    display: none;
    /* 평소엔 숨김 */
    overflow: hidden;
}

.pressure-band,
.wind-band {
    position: absolute;
    width: 100%;
    left: 0;
    display: flex;
    align-items: center;
    justify-content: flex-start;
    /* [수정] 왼쪽 정렬 */
    padding-left: 100px;
    /* [추가] 좌측 버튼과 겹치지 않도록 여백 확보 */
    font-size: 1.2rem;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.9);
    text-shadow: 0 2px 8px rgba(0, 0, 0, 0.6);
    /* [수정] 그림자를 더 진하고 선명하게 */
}


/* [재조정] 극고압대 추가 및 북반구 순서에 맞춰 띠 위치 재조정 */
.polar-high {
    top: 0;
    height: 8%;
    background: rgba(116, 185, 255, 0.25);
}

/* 신규 */
.polar-easterlies {
    top: 8%;
    height: 8%;
    background: rgba(116, 185, 255, 0.15);
}

.polar-front {
    top: 16%;
    height: 8%;
    background: rgba(9, 132, 227, 0.2);
}

.westerlies {
    top: 24%;
    height: 20%;
    background: rgba(0, 184, 148, 0.15);
}

.subtropical-high {
    top: 44%;
    height: 9%;
    background: rgba(253, 203, 110, 0.2);
}

.trade-winds {
    top: 53%;
    height: 12%;
    background: rgba(230, 126, 34, 0.15);
}

.itcz {
    top: 65%;
    height: 8%;
    background: rgba(214, 48, 49, 0.2);
}

.trade-winds2 {
    top: 73%;
    height: 12%;
    background: rgba(230, 126, 34, 0.15);
}

/* 화살표 패턴 (바람 띠에만 적용) */
/* 1. 북반구 (우상향 빗금) */
.polar-easterlies,
.trade-winds {
    background-image: repeating-linear-gradient(-45deg, transparent, transparent 10px, rgba(255, 255, 255, 0.1) 10px, rgba(255, 255, 255, 0.1) 12px);
}

/* 2. 남반구 (좌상향 빗금 - 11시~5시 방향) */
.trade-winds2 {
    background-image: repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(255, 255, 255, 0.1) 10px, rgba(255, 255, 255, 0.1) 12px);
}

/* JS가 body에 .show-climate-bands 클래스를 추가하면 띠가 나타남 */
body.show-climate-bands #atmospheric-bands-container {
    display: block;
}

/* [최종 수정] 기후 섹션 구분선 (가장 안정적인 방식) */
.climate-divider {
    width: 100%;
    margin: 25px 0;
    /* 위아래 간격 */
    text-align: center;
    color: rgba(255, 255, 255, 0.9);
    /* 글씨 선명도 살짝 올림 */
    font-size: 0.9rem;
    font-weight: 700;
    /* 글씨 살짝 더 굵게 */
    text-shadow: 0 2px 5px rgba(0, 0, 0, 0.8);
    /* [수정] 그림자를 더 진하고 넓게 */
    display: flex;
    align-items: center;
    position: relative;
    /* z-index 적용을 위해 필요 */
    z-index: 1;
    /* [추가] 대기 대순환 띠(z-index: 0)보다 위에 표시 */
}

.climate-divider span {
    padding: 0 15px;
}

.climate-divider::before,
.climate-divider::after {
    content: '';
    flex-grow: 1;
    height: 1px;
    background: repeating-linear-gradient(to right, rgba(255, 255, 255, 0.7), rgba(255, 255, 255, 0.7) 3px, transparent 3px, transparent 8px);
}

#climate-bands-toggle:hover::after {
    content: "대기 대순환 켜기/끄기";
    position: absolute;
    left: 60px;
    /* 버튼 오른쪽 */
    top: 50%;
    transform: translateY(-50%);
    background: rgba(0, 0, 0, 0.8);
    color: #fff;
    padding: 5px 10px;
    border-radius: 4px;
    white-space: nowrap;
    font-size: 0.9rem;
    pointer-events: none;
}

/* [강제 적용] 지정학 섹션 배경 */
body.bg-geopolitics {
    background: url('images/geopolitics.webp') no-repeat center center fixed !important;
    background-size: cover !important;
}

/* [신규] 둥둥 떠다니는 버튼 애니메이션 */
@keyframes floatBounce {

    0%,
    100% {
        transform: translateY(0);
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.1);
    }

    50% {
        transform: translateY(-10px);
        /* 위로 10px 둥실 */
        box-shadow: 0 15px 25px rgba(0, 0, 0, 0.1);
        /* 그림자도 멀어짐 */
    }
}

/* [신규] 바람 텍스트 전용 애니메이션 (좌우로 살랑살랑) */
@keyframes windFlow {

    0%,
    100% {
        transform: translateX(0);
    }

    50% {
        transform: translateX(10px);
    }

    /* 오른쪽으로 10px 이동 */
}

/* [적용] 'wind-band' 클래스를 가진 녀석들(편서풍, 무역풍 등) 안의 span(글자)에만 적용 */
.wind-band span {
    display: inline-block;
    /* 애니메이션 적용을 위해 블록화 */
    animation: windFlow 3s infinite ease-in-out;
    /* 3초 간격으로 부드럽게 왕복 */
}

/* (선택사항) 편서풍은 반대 방향으로 움직이게 하고 싶다면? */
/* .westerlies span { animation-direction: reverse; } */
/* [신규] 도약 버튼 스타일 */
.jump-btn-container {
    display: flex;
    justify-content: flex-end;
    /* 우측 정렬 */
    margin-top: 30px;
    padding-top: 20px;
    border-top: 1px dashed rgba(0, 0, 0, 0.1);
    /* 본문과 구분선 */
}

/* [디자인 수정] 도약 버튼 컨테이너: 가로 배열 & 우측 정렬 & 줄바꿈 허용 */
.jump-btn-container {
    display: flex;
    flex-direction: row;
    /* 가로 정렬 (기본값이라 생략 가능하지만 명시함) */
    justify-content: flex-end;
    /* 오른쪽 끝으로 밀기 */
    align-items: center;
    /* 세로 중앙 정렬 */
    flex-wrap: wrap;
    /* 공간 부족하면 다음 줄로 (모바일 대응) */
    gap: 8px;
    /* 버튼 사이 간격 */
    margin-top: 30px;
    padding-top: 15px;
    border-top: 1px dashed rgba(0, 0, 0, 0.1);
}

/* 안내 문구는 줄바꿈을 강제해서 버튼들 위에 오도록 함 */
.jump-guide-text {
    width: 100%;
    /* 한 줄 다 차지하게 */
    text-align: right;
    /* 오른쪽 정렬 */
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 5px;
    font-weight: 500;
}

/* '더 알아보기' 같은 안내 문구 스타일 */
.jump-guide-text {
    font-size: 0.75rem;
    color: var(--text-secondary);
    margin-bottom: 5px;
    font-weight: 500;
}

/* 버튼 본체 스타일: 폰트 얇게, 크기 작게 */
.jump-link-btn {
    background: linear-gradient(135deg, var(--panel-theme, #2d3436) 0%, #2d3436 100%);
    color: #fff;
    border: none;
    padding: 4px 12px;
    border-radius: 20px;
    font-family: 'Pretendard', sans-serif;
    font-weight: 400;
    /* [수정] 600 -> 400 (볼드체 제거, 얇게) */
    font-size: 0.8rem;
    cursor: pointer;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
    transition: all 0.3s ease;
    display: flex;
    align-items: center;
    gap: 6px;
    opacity: 0.9;
}

.jump-link-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
    opacity: 1;
}

/* [신규] 돌아가기 버튼 스타일 */
.return-jump-btn {
    position: fixed;
    top: 90px;
    /* 헤더 아래쪽 */
    right: 30px;
    /* 오른쪽 구석 */
    z-index: 2000;
    /* 다른 것들보다 위에 */

    background: rgba(45, 52, 54, 0.9);
    /* 검은색 반투명 배경 */
    color: #fff;
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 25px;
    /* 둥글게 */
    padding: 8px 16px;

    font-family: 'Pretendard', sans-serif;
    font-size: 0.9rem;
    font-weight: 600;
    cursor: pointer;

    display: none;
    /* 평소엔 숨김 */
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    transition: all 0.3s ease;
    animation: fadeIn 0.3s ease-out;
    /* 나타날 때 부드럽게 */
}

.return-jump-btn:hover {
    background: #000;
    transform: translateY(-2px);
}

/* 1. 세계의 권역 (geo) */
#card-1 {
    --theme: #2d3436;
}

#card-2 {
    --theme: #0984e3;
}

#card-3 {
    --theme: #e17055;
}

#card-4 {
    --theme: #c08d2d;
}

#card-5 {
    --theme: #636e72;
}

#card-6 {
    --theme: #6c5ce7;
}

#card-7 {
    --theme: #00cec9;
}

#card-8 {
    --theme: #00b894;
}

#card-9 {
    --theme: #d63031;
}

/* 2. 대지형 (terrain) */
#card-terrain-1 {
    --theme: #8D6E63;
}

#card-terrain-2 {
    --theme: #546E7A;
}

#card-terrain-3 {
    --theme: #fa8231;
}

/* 3. 특수 지형 (special) */
#card-special-1 {
    --theme: #00a8ff;
}

#card-special-2 {
    --theme: #74b9ff;
}

#card-special-3 {
    --theme: #c08b28;
}

#card-special-4 {
    --theme: #a29bfe;
}

#card-special-5 {
    --theme: #e17055;
}

#card-special-6 {
    --theme: #00cec9;
}

/* 4. 담수 시스템 (freshwater) */
#card-hydro-1 {
    --theme: #1e3799;
}

#card-hydro-2 {
    --theme: #009432;
}

#card-hydro-3 {
    --theme: #6a89cc;
}

#card-hydro-5 {
    --theme: #82ccdd;
}

#card-hydro-8 {
    --theme: #a55eea;
}

/* 5. 대양과 바다 (ocean) */
#card-hydro-6 {
    --theme: #143077;
}

#card-hydro-7 {
    --theme: #3498db;
}

#card-ocean-3 {
    --theme: #3498db;
}

#card-ocean-4 {
    --theme: #27ae60;
}

#card-ocean-5 {
    --theme: #2a5792;
}

/* 6. 세계의 기후 (climate) */
#card-climate-e {
    --theme: #74b9ff;
}

#card-climate-d {
    --theme: #0984e3;
}

#card-climate-c {
    --theme: #00b894;
}

#card-climate-b {
    --theme: #c2881d;
}

#card-climate-a {
    --theme: #d63031;
}

#card-climate-s {
    --theme: #9c88ff;
}

#card-climate-x {
    --theme: #8e82a2;
}

/* [신규] 기후 변화와 인류세 (change) */
#card-change-1 {
    --theme: #2d3436;
}

/* 지질 시대 */
#card-change-2 {
    --theme: #e17055;
}

/* 온난화 원인 */
#card-change-3 {
    --theme: #d63031;
}

/* 파장 */
#card-change-4 {
    --theme: #27ae60;
}

/* 대응 */

/* 7. 인구 (population) */
#card-population-1 {
    --theme: #3498db;
}

#card-population-2 {
    --theme: #2ecc71;
}

#card-population-3 {
    --theme: #9b59b6;
}

#card-population-4 {
    --theme: #7f8c8d;
}

#card-population-5 {
    --theme: #e67e22;
}

/* 8. 농업 (agriculture) */
#card-agri-1 {
    --theme: #4CAF50;
}

#card-agri-2 {
    --theme: #795548;
}

#card-agri-3 {
    --theme: #6F4E37;
}

/* 기호 작물 (커피색) */
#card-agri-industrial {
    --theme: #FF9800;
}

/* [신규] 상품 작물 */
#card-agri-4 {
    --theme: #8e44ad;
}

#card-agri-5 {
    --theme: #e84393;
}

#card-agri-6 {
    --theme: #bb9a18;
}

#card-agri-7 {
    --theme: #636e72;
}

#card-agri-8 {
    --theme: #8e44ad;
}

#card-agri-9 {
    --theme: #2d3436;
}

/* 9. 자원 (resources) */
#card-resources-1 {
    --theme: #D35400;
}

#card-resources-2 {
    --theme: #8D6E63;
}

#card-resources-3 {
    --theme: #c5ab18;
}

#card-resources-4 {
    --theme: #00B894;
}

#card-resources-5 {
    --theme: #95a5a6;
}

/* 10. 에너지 (energy) */
#card-energy-1 {
    --theme: #e67e22;
}

#card-energy-2 {
    --theme: #8e44ad;
}

#card-energy-3 {
    --theme: #3498db;
}

#card-energy-4 {
    --theme: #2ecc71;
}

#card-energy-5 {
    --theme: #4b6584;
}

/* 11. 공업 (industry) */
#card-industry-1 {
    --theme: #404E88;
}

#card-industry-2 {
    --theme: #B53471;
}

#card-industry-3 {
    --theme: #D6A32F;
}

#card-industry-4 {
    --theme: #2D98DA;
}

#card-industry-5 {
    --theme: #6c5ce7;
}

/* 12. 도시 (city) */
#card-city-1 {
    --theme: #3c40c6;
}

#card-city-2 {
    --theme: #0fb9b1;
}

#card-city-3 {
    --theme: #ff5e57;
}

#card-city-4 {
    --theme: #6c5ce7;
}

#card-city-5 {
    --theme: #009432;
}

/* 13. 언어 (language) */
#card-lang-1 {
    --theme: #3c40c6;
}

#card-lang-2 {
    --theme: #3c40c6;
}

#card-lang-3 {
    --theme: #d63031;
}

#card-lang-4 {
    --theme: #e17055;
}

#card-lang-5 {
    --theme: #00b894;
}

#card-lang-6 {
    --theme: #6c5ce7;
}

/* 14. 종교 (religion) */
#card-religion-1 {
    --theme: #5D729A;
}

#card-religion-2 {
    --theme: #D62828;
}

#card-religion-3 {
    --theme: #0096C7;
}

#card-religion-4 {
    --theme: #F77F00;
}

#card-religion-5 {
    --theme: #B8860B;
}

#card-religion-6 {
    --theme: #43AA8B;
}

/* 15. 문화 (cultural) */
#card-cultural-1 {
    --theme: #e17055;
}

#card-cultural-2 {
    --theme: #6fb342;
}

#card-cultural-3 {
    --theme: #333196;
}

#card-cultural-4 {
    --theme: #ac543e;
}

#card-cultural-5 {
    --theme: #377c5c;
}

#card-cultural-6 {
    --theme: #9c2d11;
}

#card-cultural-7 {
    --theme: #27ae60;
}

/* [신규] 문화 경관 */
#card-cultural-8 {
    --theme: #7f8c8d;
}

/* [신규] 장소성 */
#card-cultural-9 {
    --theme: #2c3e50;
}

/* [신규] 공간의 정치 */

/* 16. 지리학의 탐구 (Exploration) */
/* 16. 지리학의 탐구 (Exploration) - 여행과 관광 지리 */
#card-tourism-1 {
    --theme: #00cec9;
}

/* 자연지리 (청록색 - 자연/물) */
#card-tourism-2 {
    --theme: #d63031;
}

/* 역사 유적 (붉은색 - 역사/전통) */
#card-tourism-3 {
    --theme: #6c5ce7;
}

/* 종교 순례 (보라색 - 신비/종교) */
#card-tourism-4 {
    --theme: #e17055;
}

/* 엔터테인먼트 (주황색 - 활기/유희) */
#card-tourism-5 {
    --theme: #c99d4d;
}

/* 축제 (노란색 - 축제/미식) */
#card-tourism-6 {
    --theme: #2d3436;
}

/* 관광의 그늘 (검은색 - 문제/그림자) */
#card-tourism-7 {
    --theme: #00b894;
}

/* 지속 가능 여행 (초록색 - 생태/환경) */

#card-geopol-1 {
    --theme: #c0392b;
}

#card-geopol-2 {
    --theme: #2980b9;
}

#card-geopol-3 {
    --theme: #8e44ad;
}

#card-geopol-4 {
    --theme: #e67e22;
}

#card-geopol-5 {
    --theme: #636e72;
}

#card-geopol-6 {
    --theme: #b89715;
}

#card-conflict-1 {
    --theme: #c0392b;
}

#card-conflict-2 {
    --theme: #8e44ad;
}

#card-conflict-3 {
    --theme: #c09e15;
}

#card-conflict-4 {
    --theme: #3498db;
}

#card-econ-1 {
    --theme: #0984e3;
}

#card-econ-2 {
    --theme: #6c5ce7;
}

#card-econ-3 {
    --theme: #e84393;
}

#card-rural-1 {
    --theme: #6ab04c;
}

#card-rural-2 {
    --theme: #f0932b;
}

#card-rural-3 {
    --theme: #be2edd;
}

#card-rural-4 {
    --theme: #4834d4;
}

#card-rural-5 {
    --theme: #636e72;
}

#card-urban-1 {
    --theme: #cc9b3f;
}

#card-urban-2 {
    --theme: #b2bec3;
}

#card-urban-3 {
    --theme: #a29bfe;
}

#card-urban-4 {
    --theme: #636e72;
}

/* [신규] 교통지리학 (transport) */
#card-transport-1 {
    --theme: #636e72;
}

/* 도로/철도 (회색 - 아스팔트) */
#card-transport-2 {
    --theme: #0984e3;
}

/* 해상 (파랑 - 바다) */
#card-transport-3 {
    --theme: #74b9ff;
}

/* 항공 (하늘색 - 하늘) */
#card-transport-4 {
    --theme: #6c5ce7;
}

/* 네트워크 (보라 - 추상/기술) */
#card-transport-5 {
    --theme: #e17055;
}

/* 거리/공간 (주황 - 상호작용) */
#card-transport-6 {
    --theme: #00b894;
}

/* 경제학 (초록 - 돈/효율) */

/* [신규] 재난과 재해 (disaster) */
#card-disaster-1 {
    --theme: #d63031;
}

/* 지진 (빨강 - 위험/경고) */
#card-disaster-2 {
    --theme: #e17055;
}

/* 화산 (주황 - 마그마) */
#card-disaster-3 {
    --theme: #0984e3;
}

/* 기상 (파랑 - 폭풍/비) */
#card-disaster-4 {
    --theme: #ad863e;
}

/* 기후변화 (노랑 - 가뭄/폭염) */
#card-disaster-5 {
    --theme: #636e72;
}

/* 지형재해 (회색 - 흙/암석) */
#card-disaster-6 {
    --theme: #00b894;
}

/* 대응 (초록 - 안전/회복) */

/* [신규] 19. 생태와 생물지리 (bio) */
#card-bio-1 {
    --theme: #556B2F;
}

/* 구대륙: 짙은 올리브 그린 (오래된 숲) */
#card-bio-2 {
    --theme: #2E8B57;
}

/* 신세계: 씨 그린 (아마존의 짙은 녹색) */
#card-bio-3 {
    --theme: #4682B4;
}

/* 대양과 극지: 스틸 블루 (차가운 바다와 얼음) */
#card-bio-4 {
    --theme: #8B4513;
}

/* 공간과 법칙: 새들 브라운 (대지와 흙) */
#card-bio-5 {
    --theme: #2F4F4F;
}

/* 생태와 경쟁: 다크 슬레이트 그레이 (깊은 숲의 경쟁) */
#card-bio-6 {
    --theme: #A0522D;
}

/* 인류세: 시에나 (변화와 멸종의 붉은 흙) */

/* [신규] 20. 질병과 전파 (disease) */
#card-disease-1 {
    --theme: #556B2F;
}

/* 풍토병: 올리브 그린 (열대와 자연) */
#card-disease-2 {
    --theme: #8B0000;
}

/* 팬데믹: 다크 레드 (위험과 경고) */
#card-disease-3 {
    --theme: #FF8C00;
}

/* 인수공통: 다크 오렌지 (야생과 경계) */
#card-disease-4 {
    --theme: #4682B4;
}

/* 확산 경로: 스틸 블루 (이동과 네트워크) */
#card-disease-5 {
    --theme: #483D8B;
}

/* 의료지리학: 다크 슬레이트 블루 (학문과 분석) */

/* [신규] 21. 역사 지리학 (history) */
#card-history-1 {
    --theme: #CD853F;
}

/* 문명의 요람: 페루 (고대 흙) */
#card-history-2 {
    --theme: #483D8B;
}

/* 권력과 공간: 다크 슬레이트 블루 (권위) */
#card-history-x {
    --theme: #453299;
}

#card-history-3 {
    --theme: #8B4513;
}

/* 문명의 통로: 새들 브라운 (실크로드) */
#card-history-4 {
    --theme: #556B2F;
}

/* 지명과 권력: 다크 올리브 그린 (오래된 지도) */
#card-history-5 {
    --theme: #2F4F4F;
}

/* 인간과 환경: 다크 슬레이트 그레이 (시간의 흔적) */

/* 17. 지도 (maps) */
#card-map-1 {
    --theme: #2c3e50;
}

#card-map-2 {
    --theme: #8e44ad;
}

#card-map-3 {
    --theme: #2980b9;
}

#card-map-4 {
    --theme: #c0392b;
}

#card-map-5 {
    --theme: #d35400;
}

/* 18. 토양 (soil) */
#card-soil-1 {
    --theme: #795548;
}

/* 수목 성대 (갈색) */
#card-soil-2 {
    --theme: #3e2723;
}

/* 무수목 성대 (진한 갈색/흑색) */
#card-soil-3 {
    --theme: #d35400;
}

/* 간대 토양 (붉은색/테라로사) */
#card-soil-4 {
    --theme: #8d6e63;
}

/* 미성숙토 (연한 갈색) */

/* ----------------------------------------------------- */
/* [통합] 카드 좌측 띠지 및 내부 색상 자동 적용          */
/* ----------------------------------------------------- */
.region-card {
    border-left-color: var(--theme);
}

.header-content h2::before {
    color: var(--theme);
}

.card-bg-icon {
    fill: var(--theme);
}

/* [긴급 수정] 기후 카드 높이 정상화 */
[id^="card-climate-"] {
    height: 100px;
    /* 카드 자체의 높이를 160px -> 100px로 줄임 */
}

/* 기후 카드 헤더 내부 정렬 방식 변경 */
[id^="card-climate-"] .card-header {
    align-items: center;
    /* 기존 중앙 정렬 유지 */
    padding-top: 5px;
    /* 위쪽 여백 살짝 추가 */
    padding-bottom: 5px;
    /* 아래쪽 여백 살짝 추가 */
}

/* 기후 카드 분류 가이드의 세로선 높이 조절 */
[id^="card-climate-"] .classification-separator {
    height: 55px;
    /* 세로선 높이를 60px -> 55px로 줄여서 여유 공간 확보 */
}

/* ===================================================== */
/* [필수] 데스크톱 환경에서 모바일 요소 원천 봉쇄        */
/* (이 코드가 없으면 PC 화면에 모바일 메뉴가 튀어나옵니다) */
/* ===================================================== */
#mobile-menu-btn,
#mobile-close-btn,
#mobile-nav-overlay,
#mobile-nav-panel {
    display: none !important;
}

/* PC 스크롤 강제 복구 */
body {
    overflow-y: auto !important;
    overflow-x: hidden !important;
}

/* ===================================================== */
/* [최종 수정] 인라인 히어로 갤러리 스타일               */
/* ===================================================== */

/* 1. 갤러리 버튼 */
.inline-gallery-btn {
    position: absolute;
    /* 공중에 띄움 */
    top: 0;
    right: 0;

    background: transparent;
    border: 1px solid #b2bec3;
    color: #636e72;
    border-radius: 20px;
    padding: 4px 12px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 5px;
    white-space: nowrap;
}

/* 버튼에 마우스 올리거나 활성화됐을 때 */
.inline-gallery-btn:hover,
.inline-gallery-btn.active {
    background: var(--panel-theme, #2d3436);
    /* 카드의 테마색을 따라감 */
    color: #fff;
    border-color: var(--panel-theme, #2d3436);
}

/* 2. 갤러리 컨테이너 (열리고 닫히는 상자) */
.inline-gallery-container {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.5s cubic-bezier(0.25, 1, 0.5, 1), margin-top 0.3s;

    /* [수정] 트랙이 아닌 컨테이너 전체에 배경색 적용 (일관성 확보) */
    background: color-mix(in srgb, var(--panel-theme, #2d3436) 35%, #101010);

    border-radius: 8px;
    margin-top: 0;
    position: relative;
    /* [중요] 화살표 버튼의 위치 기준점 */
}

/* 갤러리가 열렸을 때 적용되는 스타일 */
.inline-gallery-container.open {
    max-height: 600px !important;
    /* 충분히 큰 높이로 설정해 내용이 보이게 함 */
    margin-top: 15px;
    /* 위쪽 여백 추가 */
    border: 1px solid rgba(0, 0, 0, 0.1);
}

/* 3. 이미지 트랙 (사진들이 나열된 긴 띠) */
.gallery-track {
    display: flex;
    transition: transform 0.4s cubic-bezier(0.25, 1, 0.5, 1);

    /* [수정] 높이 자동 해제 -> 4:3 비율 고정 */
    height: auto;
    aspect-ratio: 4 / 3;

    background: transparent;
    /* 기존 설정 유지 (투명) */
}

/* 개별 슬라이드 */
.gallery-slide {
    min-width: 100%;
    /* 한 번에 하나씩만 보임 */
    height: 100%;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
}

/* 이미지 스타일 */
.gallery-image {
    width: 100%;
    height: 100%;

    /* [기존 유지] 비율 유지하며 전체 보이기 */
    object-fit: contain;

    /* [핵심 변경] 상하 정렬을 '상단(top)'으로 설정 */
    /* 이미지를 위쪽으로 끌어올려, 하단 캡션이 이미지를 가리는 것을 방지합니다 */
    object-position: top center;

    opacity: 0;
    transition: opacity 0.3s ease;
}

.gallery-image.loaded {
    opacity: 1;
    /* 로딩 완료되면 보임 */
}

/* 4. 좌우 화살표 버튼 */
.gallery-nav {
    position: absolute;
    top: 50%;
    /* 컨테이너 높이의 정확히 절반 지점 */
    transform: translateY(-50%);
    /* 버튼 크기만큼 보정하여 수직 중앙 정렬 */

    /* 나머지 스타일 유지 */
    background: rgba(255, 255, 255, 0.2);
    border: none;
    color: #fff;
    width: 36px;
    height: 36px;
    border-radius: 50%;
    cursor: pointer;
    z-index: 10;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.2rem;
    backdrop-filter: blur(4px);
    transition: background 0.2s;
}

.gallery-nav:hover {
    background: rgba(255, 255, 255, 0.4);
}

.gallery-nav.prev {
    left: 10px;
}

.gallery-nav.next {
    right: 10px;
}

/* [수정] 사진 설명 (캡션) - 테마색 기반 안개 효과 적용 */
.gallery-caption-overlay {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 100%;
    box-sizing: border-box;

    padding: 60px 20px 20px 20px;
    /* 위쪽 패딩을 넉넉히 주어 그라데이션 공간 확보 */

    /* [핵심 변경] 무채색 검정이 아닌, 테마색이 감도는 어두운 안개 */
    background: linear-gradient(to top,
            color-mix(in srgb, var(--panel-theme, #000) 30%, black) 0%,
            /* 바닥: 테마색 섞인 진한 검정 */
            color-mix(in srgb, var(--panel-theme, #000) 15%, transparent) 70%,
            /* 중간: 서서히 투명해짐 */
            transparent 100%
            /* 상단: 완전 투명 */
        );

    color: #fff;
    text-align: center;
    font-size: 0.95rem;
    font-weight: 500;
    pointer-events: none;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.8);
    /* 글자 그림자를 진하게 하여 가독성 보장 */
}

/* 6. 준비중 화면 스타일 */
.gallery-empty-state {
    padding: 40px 20px;
    text-align: center;
    color: #b2bec3;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    gap: 10px;
}

.empty-icon {
    font-size: 2rem;
    opacity: 0.7;
}

.empty-text {
    font-size: 0.95rem;
    font-weight: 600;
}

/* [갤러리 강제 노출 패치] */
.inline-gallery-container.open {
    display: block !important;
    height: auto !important;
    min-height: 200px !important;
    max-height: none !important;
    opacity: 1 !important;
    visibility: visible !important;

    /* [수정] 15px -> 5px로 줄여서 제목과 가깝게 붙임 */
    margin-top: 5px !important;

    padding: 0 !important;

    /* 배경색 삭제됨 (유지) */

    border: 1px solid rgba(0, 0, 0, 0.1);
    z-index: 100;
}

/* [신규] 갤러리가 열렸을 때만, 아래쪽 본문(리스트)을 강제로 밀어내어 간격 확보 */
.inline-gallery-container.open+.detail-list {
    margin-top: 40px !important;
}

/* [신규] 이미지가 1개일 때(single-mode) UI 정리 */
.inline-gallery-container.single-mode .gallery-nav {
    display: none !important;
    /* 화살표만 제거 (캡션은 보이게 둠) */
}

/* 1개일 때는 클릭 커서 제거 */
.inline-gallery-container.single-mode .gallery-slide {
    cursor: default;
}

/* [신규] 중분류 카드 내부 메타데이터 그리드 (PC 기본) */
.sub-card-criteria-grid {
    display: grid;
    grid-template-columns: repeat(2, 1fr);
    /* PC는 1fr로 넉넉하게 */
    gap: 8px;
    margin-bottom: 12px;
    padding: 8px 0;
    border-top: 1px dashed rgba(0, 0, 0, 0.1);
    border-bottom: 1px dashed rgba(0, 0, 0, 0.1);
    box-sizing: border-box;
}

.sub-card-criteria-grid .criteria-item {
    display: flex;
    align-items: flex-start;
    min-width: 0;
    /* 자식 요소 폭주 방지 기본 설정 */
}

.sub-card-criteria-grid .criteria-icon {
    margin-right: 8px;
    flex-shrink: 0;
    font-size: 1.1rem;
}

.sub-card-criteria-grid .criteria-content {
    flex: 1;
    min-width: 0;
    /* 텍스트 박스 폭주 방지 */
}

.sub-card-criteria-grid .criteria-label {
    display: block;
    font-weight: 700;
    font-size: 0.8rem;
    margin-bottom: 2px;
    color: var(--text-primary);
}

.sub-card-criteria-grid .criteria-text {
    display: block;
    font-size: 0.9rem;
    line-height: 1.4;
    color: var(--text-secondary);
}

/* [신규] 심화 학습 아티클 모달 스타일 */
.article-modal {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0, 0, 0, 0.6);
    backdrop-filter: blur(5px);
    z-index: 20000;
    display: none;
    opacity: 0;
    align-items: center;
    justify-content: center;
    transition: opacity 0.3s ease;
}

.article-modal.show {
    display: flex;
    opacity: 1;
}

.article-content-box {
    background: #fff;
    width: 800px;
    max-width: 90%;
    max-height: 85vh;
    border-radius: 16px;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.3);
    overflow: hidden;
    display: flex;
    flex-direction: column;
    position: relative;
    animation: slideUp 0.4s cubic-bezier(0.25, 1, 0.5, 1);
}

@keyframes slideUp {
    from {
        transform: translateY(50px);
        opacity: 0;
    }

    to {
        transform: translateY(0);
        opacity: 1;
    }
}

.article-close-btn {
    position: absolute;
    top: 20px;
    right: 20px;
    background: transparent;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: #636e72;
    transition: color 0.2s;
}

.article-close-btn:hover {
    color: #2d3436;
}

.article-header {
    padding: 40px 40px 20px 40px;
    border-bottom: 1px solid #eee;
    background: #f8f9fa;
}

.article-badge {
    display: inline-block;
    background: #2d3436;
    color: #fff;
    font-size: 0.8rem;
    font-weight: 700;
    padding: 4px 10px;
    border-radius: 20px;
    margin-bottom: 10px;
    font-family: 'Inter', sans-serif;
}

.article-header h2 {
    margin: 0;
    font-family: 'Noto Serif KR', serif;
    font-size: 2rem;
    color: #2d3436;
    line-height: 1.3;
}

.article-body {
    padding: 40px;
    overflow-y: auto;
    font-size: 1.05rem;
    line-height: 1.8;
    color: #2d3436;
    font-family: 'Pretendard', sans-serif;
}

.article-body h3 {
    font-size: 1.4rem;
    margin-top: 30px;
    margin-bottom: 15px;
    color: #2d3436;
    border-left: 4px solid var(--panel-theme, #3498db);
    padding-left: 15px;
}

.article-body p {
    margin-bottom: 20px;
    text-align: justify;
    word-break: keep-all;
}

.article-body ul {
    margin-bottom: 20px;
    padding-left: 20px;
}

.article-body li {
    margin-bottom: 10px;
}

.article-body strong {
    color: #000;
    font-weight: 700;
    background: linear-gradient(to top, #ffeaa7 50%, transparent 50%);
}

/* 리스트 내 책 아이콘 버튼 */
.article-btn {
    cursor: pointer;
    margin-left: 8px;
    font-size: 1.1rem;
    transition: transform 0.2s;
    display: inline-block;
    vertical-align: middle;
}

.article-btn:hover {
    transform: scale(1.2) rotate(10deg);
}

.hidden-article-content {
    display: none;
}

/* [수정] 아티클 모달 상단 이미지 스타일 */
.article-img-container {
    display: none;
    width: 100%;
    height: 350px;
    /* 높이를 고정해야 contain 효과가 예쁘게 나옵니다 */
    overflow: hidden;
    background-color: #f8f9fa;
    /* 여백 부분의 배경색 (회색조) */
    border-bottom: 1px solid #eee;
    text-align: center;
    /* 이미지를 가운데 정렬 */
}

.article-img-container img {
    width: 100%;
    height: 100%;

    /* [핵심 수정] cover -> contain */
    /* 비율을 유지하며 이미지를 다 보여줍니다. 남는 공간은 여백이 됩니다. */
    object-fit: contain;

    object-position: center;
    display: block;
}

/* 본문 패딩 조정 (이미지와 간격 확보) */
.article-body {
    padding: 30px 40px 40px 40px;
    /* 상단 패딩을 조금 줄임 */
    /* 나머지 속성 유지 */
    overflow-y: auto;
    font-size: 1.05rem;
    line-height: 1.8;
    color: #2d3436;
    font-family: 'Pretendard', sans-serif;
}

/* [신규] 중분류 카드용 딥다이브 버튼 (갤러리 버튼과 유사한 스타일) */
.sub-deep-dive-btn {
    background: transparent;
    border: 1px solid var(--panel-theme, #2d3436);
    color: var(--panel-theme, #2d3436);
    border-radius: 20px;
    padding: 4px 12px;
    font-size: 0.85rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    gap: 5px;
    white-space: nowrap;
    margin-left: 8px;
    /* 갤러리 버튼과의 간격 */
}

.sub-deep-dive-btn:hover {
    background: var(--panel-theme, #2d3436);
    color: #fff;
}

/* [신규] 중분류 버튼 그룹 컨테이너 (우측 상단 고정) */
.sub-control-group {
    position: absolute;
    /* 기존 갤러리 버튼의 위치 속성을 가져옴 */
    top: 0;
    right: 0;
    display: flex;
    /* 버튼들을 가로로 나열 */
    gap: 5px;
    /* 버튼 사이 간격 */
    z-index: 10;
}

/* [중요] 그룹 안에 들어간 기존 갤러리 버튼의 절대 위치 속성 해제 */
.sub-control-group .inline-gallery-btn {
    position: static !important;
    /* absolute 무력화 */
    margin: 0 !important;
    transform: none !important;
}

/* [신규] 딥다이브 버튼 스타일 (아이콘만 표시) */
.sub-deep-dive-btn {
    background: transparent;
    border: 1px solid #b2bec3;
    color: #636e72;
    border-radius: 50%;
    /* 원형 버튼 */
    width: 32px;
    /* 갤러리 버튼 높이와 맞춤 */
    height: 32px;
    font-size: 1.1rem;
    cursor: pointer;
    transition: all 0.2s;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 0;
}

.sub-deep-dive-btn:hover {
    background: var(--panel-theme, #2d3436);
    color: #fff;
    border-color: var(--panel-theme, #2d3436);
    transform: translateY(-2px);
}

/* ===================================================== */
/* [신규] 강수와 구름 섹션 전용 스타일 (Sky Grid)        */
/* ===================================================== */

/* 1. 섹션 전체 배경: 하늘 그라데이션 */
#section-cloud.active {
    /* 우주(검남색) -> 성층권(진파랑) -> 대류권(하늘색) -> 지표(흰색/연회색) */
    background: linear-gradient(to bottom, #0f2027 0%, #203a43 20%, #2c5364 50%, #87CEEB 85%, #f7f9fc 100%) !important;
    background-attachment: fixed !important;
    padding-top: 80px;
    /* 헤더 공간 */
    padding-bottom: 100px;
    min-height: 150vh;
    /* 스크롤을 유도하기 위해 높이 확보 */
}

/* 2. 구름 그리드 컨테이너 */
.sky-grid-container {
    display: grid;
    max-width: 1400px;
    margin: 0 auto;
    padding: 20px;
    gap: 20px;

    /* [핵심] 4열 구조: 적운형 | 층운형 | 강수/현상 | 수직발달 */
    grid-template-columns: 1fr 1fr 1fr 1.2fr;

    /* 행 구조: 제트기류(별도) | 상층 | 중층 | 하층 */
    grid-template-rows: 200px 200px 250px;
    /* 높이는 구름의 두께감에 따라 조정 */
}

/* [재수정] 구름 카드 스타일 (텍스트 중앙 정렬 복구) */
.cloud-card {
    /* 기본 배경색 (유리 효과) */
    background-color: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.4);
    border-radius: 16px;
    padding: 20px;

    position: relative;
    /* 가상 요소 기준점 */
    overflow: hidden;
    /* 이미지 넘침 방지 */

    cursor: pointer;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);

    /* [복구] 텍스트 중앙 정렬 */
    display: flex;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    /* 다시 가운데로 */
    text-align: center;
    /* 텍스트도 가운데 정렬 */

    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.05);
}

/* [핵심] 배경 이미지 레이어 (가상 요소) */
.cloud-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;

    /* JS에서 주입한 이미지 URL 사용 */
    background-image: var(--bg-image);
    background-size: cover;
    background-position: center;
    background-repeat: no-repeat;

    /* [마스킹] 좌상단(보임) -> 우하단(투명) */
    -webkit-mask-image: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0) 60%);
    mask-image: linear-gradient(135deg, rgba(0, 0, 0, 0.9) 0%, rgba(0, 0, 0, 0) 60%);

    z-index: 0;
    opacity: 1.0;
    /* 이미지 선명도 */
    transition: transform 0.5s ease;
}

/* 호버 시 이미지 확대 및 카드 부상 */
.cloud-card:hover {
    transform: translateY(-5px);
    background-color: rgba(255, 255, 255, 0.25);
    box-shadow: 0 10px 30px rgba(0, 0, 0, 0.15);
}

.cloud-card:hover::before {
    transform: scale(1.05);
}

/* 4. 특수 배치 (수직 발달 구름: 적란운) */
.cloud-card.vertical-cloud {
    grid-row: 1 / span 3;
    grid-column: 4;
    /* 적란운은 배경색을 좀 더 어둡게 */
    background: linear-gradient(to bottom, rgba(255, 255, 255, 0.3), rgba(0, 0, 0, 0.2));
    justify-content: flex-start;
    padding-top: 40px;
}

/* [수정] 층별 구름 띠지 두께 확대 (3px -> 4px) 및 가시성 강화 */
.cloud-card.row-high {
    border-top: 4px solid rgba(255, 255, 255, 0.9);
}

/* 상층운: 진한 흰색 */
.cloud-card.row-mid {
    border-top: 4px solid rgba(129, 236, 236, 0.9);
}

/* 중층운: 선명한 청록색 */
.cloud-card.row-low {
    border-top: 4px solid rgba(116, 185, 255, 0.9);
}

/* 하층운: 선명한 하늘색 */

/* [기존 유지] 적란운 (수직) */
.cloud-card.vertical-cloud {
    border-right: 4px solid rgba(255, 255, 255, 0.95);
}

/* [신규] 적운 전용 (Growing Cloud) - 우측 띠지 강제 적용 */
.cloud-card.growing-cloud {
    border-right: 4px solid rgba(255, 255, 255, 0.95) !important;
}

/* 6. 텍스트 스타일 (이미지 위에 뜨도록 z-index 설정) */
.cloud-title-group,
.cloud-desc,
.cloud-phenomena {
    position: relative;
    z-index: 1;
    text-shadow: 0 1px 10px rgba(0, 0, 0, 0.3);
    /* 가독성 확보 */
}

.cloud-name {
    font-family: 'Noto Serif KR', serif;
    font-size: 1.5rem;
    font-weight: 800;
    color: #fff;
    margin: 0;
}

.cloud-desc {
    font-size: 0.95rem;
    color: #fff;
    font-weight: 500;
    line-height: 1.5;
    word-break: keep-all;
    margin-top: 8px;
    opacity: 0.95;
}

/* 아이콘 삭제 */
.cloud-icon {
    display: none;
}

/* 7. 기상 현상 태그 (강수 등) */
.phenomenon-tag {
    margin-top: 10px;
    background: rgba(0, 0, 0, 0.6);
    color: #ffeb3b;
    /* 노란색 강조 */
    padding: 4px 10px;
    border-radius: 20px;
    font-size: 0.8rem;
    font-weight: 700;
    display: inline-flex;
    align-items: center;
    gap: 5px;
}

/* [수정] 제트기류 레이어 스타일 */
#jet-stream-layer {
    width: 100%;
    height: 50px;
    /* 높이 살짝 축소 */
    margin-bottom: 20px;
    background: rgba(255, 255, 255, 0.1);
    /* 옅은 배경 */
    border-bottom: 1px solid rgba(255, 255, 255, 0.2);
    overflow: hidden;
    /* 글자가 밖으로 나가지 않게 */
    position: relative;
    display: flex;
    align-items: center;
}

/* 흐르는 텍스트 트랙 */
.jet-text-track {
    display: flex;
    white-space: nowrap;
    /* 줄바꿈 방지 */
    animation: jetStreamFlow 20s linear infinite;
    /* 20초 동안 천천히 흐름 */
}

/* 개별 텍스트 덩어리 */
.jet-text-track span {
    display: inline-block;
    padding-right: 100px;
    /* 글자 간 간격 */
    font-size: 1.2rem;
    font-weight: 800;
    color: rgba(255, 255, 255, 0.7);
    /* 은은한 흰색 */
    font-family: 'Inter', sans-serif;
}

/* 애니메이션 정의: 왼쪽에서 오른쪽으로 흐름 (편서풍 방향) */
@keyframes jetStreamFlow {
    from {
        transform: translateX(-50%);
    }

    /* 중간부터 시작해서 */
    to {
        transform: translateX(0%);
    }

    /* 오른쪽으로 이동 */
}

/* 모바일 대응: 1열로 쭉 나열 */
@media (max-width: 1024px) {
    .sky-grid-container {
        grid-template-columns: 1fr;
        grid-template-rows: auto;
        /* 높이 자동 */
        gap: 15px;
    }

    .cloud-card.vertical-cloud {
        grid-row: auto;
        /* 수직 관통 해제 */
        grid-column: auto;
        min-height: 300px;
    }
}

/* [신규] 구름 제목 그룹 스타일 */
.cloud-title-group {
    margin-bottom: 8px;
    display: flex;
    flex-direction: column;
    align-items: center;
    line-height: 1.2;
}

/* 한국어 제목 (기존 스타일 유지) */
.cloud-name {
    margin-bottom: 2px !important;
    /* 아래 여백 줄임 */
}

/* [신규] 영어 명칭 스타일 */
.cloud-english {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.7);
    font-weight: 500;
    font-family: 'Inter', sans-serif;
    letter-spacing: 0.02em;
}

/* [재수정] 적운 전용 스타일 (찌그러짐 방지) */
.cloud-card.growing-cloud {
    /* 1. 크기 조절: transform 대신 직접 높이를 늘림 (120% 효과) */
    height: 120%;
    margin-top: 5%;
    /* 중심을 맞추기 위해 위로 올림 */

    /* 2. 이동 및 회전: 이제 찌그러지지 않음 */
    transform: translateX(275px) rotate(-2deg);

    z-index: 5;
    background-color: rgba(255, 255, 255, 0.25);
    border: 1px solid rgba(255, 255, 255, 0.6);
    box-shadow: 10px 10px 20px rgba(0, 0, 0, 0.15);
}

/* 텍스트 역보정 불필요 (scale을 안 썼으므로 제거) */
/* .cloud-card.growing-cloud > * { ... } 삭제 */

/* 호버 시: 회전과 쏠림을 유지한 채 위로 부상 */
.cloud-card.growing-cloud:hover {
    transform: translateX(275px) rotate(2deg) translateY(-10px);
    z-index: 20;
    box-shadow: 15px 20px 30px rgba(0, 0, 0, 0.2);
}

/* [신규] 강수 유형 패널 스타일 */
.precip-container {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    /* 4개 가로 나열 */
    gap: 20px;
    max-width: 1400px;
    margin: 40px auto 0;
    /* 구름 그리드와 간격 */
    padding: 0 20px;
}

.precip-card {
    background: rgba(0, 0, 0, 0.4);
    /* 어두운 반투명 배경 */
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 20px;
    color: #fff;
    transition: transform 0.2s;
}

.precip-card:hover {
    transform: translateY(-5px);
    background: rgba(0, 0, 0, 0.5);
    border-color: rgba(255, 255, 255, 0.4);
}

.precip-header {
    margin-bottom: 12px;
    border-bottom: 1px solid rgba(255, 255, 255, 0.1);
    padding-bottom: 8px;
}

.precip-title {
    font-family: 'Noto Serif KR', serif;
    font-size: 1.2rem;
    font-weight: 700;
    color: #fff;
    margin: 0 0 5px 0;
}

.precip-meta {
    font-size: 0.8rem;
    color: #ffd700;
    /* 노란색 강조 */
    font-weight: 500;
}

.precip-desc {
    font-size: 0.9rem;
    line-height: 1.5;
    color: rgba(255, 255, 255, 0.85);
    margin-bottom: 15px;
    word-break: keep-all;
}

.precip-related {
    font-size: 0.85rem;
    color: rgba(255, 255, 255, 0.6);
    background: rgba(255, 255, 255, 0.1);
    padding: 6px 10px;
    border-radius: 4px;
}

.related-label {
    font-weight: 700;
    color: #fff;
    margin-right: 5px;
}

/* 모바일 대응 */
@media (max-width: 1024px) {
    .precip-container {
        grid-template-columns: 1fr;
        /* 세로로 쌓기 */
    }
}

/* [재수정] 기후 섹션 전용: 딥다이브 버튼만 숨김 (갤러리는 유지) */
#section-climate .sub-deep-dive-btn {
    display: none !important;
}

/* [핵심] 제목 우측 여백 축소 (강제 개행 해결) */
/* 기존 110px(버튼 2개 공간) -> 40px(화살표 공간)로 줄여서 텍스트 공간 확보 */
#section-climate .sub-title-heading {
    padding-right: 40px !important;
    white-space: nowrap !important;
    /* 줄바꿈 금지 */
}

/* ===================================================== */
/* [신규] 지구 시스템 섹션 전용 스타일 (Earth System)    */
/* ===================================================== */

/* 1. 섹션 전체 컨테이너 */
#section-earth-system.active {
    padding: 0 !important;
    /* 전체 화면을 쓰기 위해 패딩 제거 */
    background-color: #000;
    /* 기본 배경 검정 */
    overflow-x: hidden;
}

/* [제1구간] 우주 배경 및 별 */
.earth-system-space-view {
    position: relative;
    width: 100%;
    height: 100vh;
    background: radial-gradient(circle at 30% 30%, #1a1a2e 0%, #000000 80%);
    overflow: hidden;
    perspective: 1000px;
    /* 3D 효과를 위한 원근감 */
}

/* 별 (간단한 먼지 효과) */
.space-stars {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background-image:
        radial-gradient(white, rgba(255, 255, 255, .2) 2px, transparent 3px),
        radial-gradient(white, rgba(255, 255, 255, .15) 1px, transparent 2px),
        radial-gradient(white, rgba(255, 255, 255, .1) 2px, transparent 3px);
    background-size: 550px 550px, 350px 350px, 250px 250px;
    background-position: 0 0, 40px 60px, 130px 270px;
    opacity: 0.8;
}

/* 지구 컨테이너 (위치 및 크기 재설정) */
.earth-container {
    position: absolute;
    /* 
       [위치 조절] 
       bottom: 화면 아래에서 얼마나 떨어질지 (음수면 아래로 숨김)
       right: 화면 오른쪽에서 얼마나 떨어질지 (음수면 오른쪽으로 숨김)
    */
    bottom: -15%;
    right: -5%;

    /* 
       [크기 조절] 
       SVG 좌표계(1000x1000)를 담기 위해 컨테이너를 키움 
       글자가 잘리지 않도록 충분히 크게 설정
    */
    width: 1000px;
    height: 1000px;
    z-index: 10;

    /* 디버깅용: 영역 확인이 필요하면 아래 주석을 해제하세요 */
    /* border: 1px solid red; */
}

/* 지구 본체 (구체) */
.earth-sphere {
    /* 컨테이너(1000px) 내에서 지구가 차지할 크기와 위치 */
    width: 800px;
    height: 800px;

    /* 지구를 컨테이너의 오른쪽 아래로 밀어넣음 (왼쪽 상단 여백 확보용) */
    position: absolute;
    bottom: 0;
    right: 0;

    border-radius: 50%;
    background: #2c3e50;
    box-shadow: -20px -20px 50px rgba(0, 0, 0, 0.8) inset,
        10px 10px 30px rgba(255, 255, 255, 0.1) inset,
        0 0 20px rgba(74, 144, 226, 0.3);
    overflow: hidden;
}

/* 지구 텍스처 (지도 이미지) */
/* 실제 이미지가 없으므로 그라데이션으로 대륙 느낌만 냄 */
.earth-texture {
    position: absolute;
    width: 200%;
    height: 100%;
    background: url('images/satellite-map.webp');
    background-size: cover;
    opacity: 0.6;
    animation: earth-rotate 60s linear infinite;
    /* 자전 효과 */
}

@keyframes earth-rotate {
    from {
        transform: translateX(-50%);
    }

    to {
        transform: translateX(0);
    }
}

/* 대기권 (푸른 빛) */
.earth-atmosphere {
    position: absolute;
    top: -10px;
    left: -10px;
    right: -10px;
    bottom: -10px;
    border-radius: 50%;
    box-shadow: 0 0 40px rgba(74, 144, 226, 0.6) inset;
    pointer-events: none;
}

/* 대기 대순환 SVG 오버레이 */
.circulation-svg {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    z-index: 35;
    /* transform: rotate(-15deg); <-- 회전 제거 */
}

/* [에너지 흐름도 SVG] */
.energy-balance-svg{
    position:absolute;
    inset:0;
    width:100%;
    height:100%;
    overflow:visible;
}

.energy-balance-container .flow-title{
    position:absolute;
    z-index:2;
}


.cell-path {
    fill: none;

    /* ✅ 밝은 하늘색 계열(에너지 화살표와 분리) */
    stroke: rgba(130, 215, 255, 0.78);

    stroke-width: 3;
    stroke-dasharray: 15 10;
    animation: flow-dash 3s linear infinite;

    /* ✅ SVG에서도 잘 먹는 그림자(대부분 브라우저에서 drop-shadow 지원) */
    filter: drop-shadow(0 0 6px rgba(90, 190, 255, 0.35));
}


/* [지구 시스템] 페렐 순환 역회전 (톱니바퀴 원리) */
#ferrel-cell {
    animation-name: flow-dash-reverse;
    /* 역방향 애니메이션 적용 */
}

@keyframes flow-dash-reverse {
    to {
        stroke-dashoffset: 25;
    }

    /* 양수 값으로 이동 (반대 방향) */
}

/* [지구 시스템] 항상풍대 (바람 띠) 스타일 - 수정본 */
.wind-bands-overlay {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 5;
    opacity: 0.85;
    /* [수정] 0.7 -> 0.85 (조금 더 진하게) */
    pointer-events: none;
}

.earth-system-space-view .wind-band {
    position: absolute;
    left: 0;
    width: 60%;
    display: flex;
    align-items: center;
    padding-left: 20px;
    font-size: 14px;
    font-weight: 700;
    color: rgba(255, 255, 255, 0.9);
    text-shadow: 0 1px 3px rgba(0, 0, 0, 1);
    box-sizing: border-box;
    border-bottom: 1px dashed rgba(255, 255, 255, 0.2);
}

/* 기압대 텍스트 공통 스타일 */
.pressure-label {
    position: absolute;
    left: 0;
    width: 60%;
    text-align: left;
    /* [수정] 150px -> 360px (지구 위로 오도록 우측으로 대폭 이동) */
    padding-left: 360px;
    font-size: 16px;
    font-weight: 900;
    color: #fff;
    text-shadow: 0 0 10px #000, 0 0 5px #000;
    z-index: 6;
}

/* 1. 극고압대 (맨 위) */
.polar-high-label {
    top: 0%;
}

/* 2. 극동풍대 (위도 60~90도) */
.earth-system-space-view .polar-easterlies {
    top: 2%;
    height: 15%;
    /* [수정] 투명도 0.15 -> 0.3 (조금 더 진하게) */
    background: linear-gradient(90deg, rgba(100, 200, 255, 0.3), transparent);
    padding-left: 450px;
}

/* 3. 한대전선대 (극동풍과 편서풍 사이) */
.polar-front-label {
    top: 17%;
    transform: translateY(-50%);
}

/* 4. 편서풍대 (위도 30~60도) */
.earth-system-space-view .westerlies {
    top: 17%;
    height: 18%;
    /* [수정] 투명도 0.15 -> 0.3 */
    background: linear-gradient(90deg, rgba(255, 100, 100, 0.3), transparent);
    padding-left: 300px;
}

/* 5. 아열대고압대 (편서풍과 무역풍 사이) */
.subtropical-high-label {
    top: 35%;
    transform: translateY(-50%);
}

/* 6. 무역풍대 (위도 0~30도) */
.earth-system-space-view .trade-winds {
    top: 35%;
    height: 18%;
    /* [수정] 투명도 0.15 -> 0.3 */
    background: linear-gradient(90deg, rgba(255, 200, 100, 0.3), transparent);
    padding-left: 200px;
}

/* 7. 열대수렴대 (맨 아래) */
.itcz-label {
    top: 53%;
}

/* 바람 방향 애니메이션 (기존 유지) */
.earth-system-space-view .wind-band span {
    display: inline-block;
    white-space: nowrap;
}

.earth-system-space-view .polar-easterlies span,
.earth-system-space-view .trade-winds span {
    animation: wind-flow-left 10s linear infinite;
}

.earth-system-space-view .westerlies span {
    animation: wind-flow-right 10s linear infinite;
}

@keyframes wind-flow-left {
    0% {
        transform: translateX(30px);
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    80% {
        opacity: 1;
    }

    100% {
        transform: translateX(-30px);
        opacity: 0;
    }
}

@keyframes wind-flow-right {
    0% {
        transform: translateX(-30px);
        opacity: 0;
    }

    20% {
        opacity: 1;
    }

    80% {
        opacity: 1;
    }

    100% {
        transform: translateX(30px);
        opacity: 0;
    }
}

.cell-label {
    /* ✅ 순환세포 라벨 전용 폰트(에너지 라벨과 확실히 구분) */
    font-family: "Pretendard", "Noto Sans KR", system-ui, sans-serif;
    font-size: 20px;
    font-weight: 800;

    /* ✅ 밝은 하늘색(텍스트는 선보다 조금 더 밝게) */
    fill: rgba(190, 240, 255, 0.95);

    /* ✅ SVG 텍스트 외곽선(가독성 안정) */
    paint-order: stroke fill;
    stroke: rgba(0, 0, 0, 0.55);
    stroke-width: 2px;

    /* text-shadow는 SVG에선 브라우저별로 안 먹는 경우가 많아서 제거 */
    text-anchor: start;
}


@keyframes flow-dash {
    to {
        stroke-dashoffset: -25;
    }

    /* 애니메이션 속도 조정 */
}

/* [최종 각도 수정] 지구 시스템 에너지 흐름도 스타일 */
.energy-balance-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    z-index: 25;
    pointer-events: none;
    overflow: hidden;
}

.flow-title {
    position: absolute;
    top: 15%;
    left: 10%;
    font-family: 'Noto Serif KR', serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: #fff;
    text-shadow: 0 0 10px rgba(0, 0, 0, 0.8);
}

/* 화살표 공통 스타일 */
.flow-arrow {
    position: absolute;
    height: 25px;
    border-radius: 2px;
}

.flow-arrow::after {
    content: '';
    position: absolute;
    top: -3px;
    width: 0;
    height: 0;
    border-top: 15px solid transparent;
    border-bottom: 15px solid transparent;
}

/* 라벨 공통 스타일 */
.flow-label {
    position: absolute;
    color: #fff;
    font-size: 1rem;
    font-weight: 600;
    text-shadow: 0 1px 5px #000;
}

/* 1. 태양 복사 (입사) */
.solar-in {
    top: 58%;
    left: 35%;
    width: 25%;
    background: #f1c40f;
    box-shadow: 0 0 15px #f1c40f;
    transform: rotate(0deg); /* 각도 수정 */
    transform-origin: left center; /* 회전축 수정 */
}
.solar-in::after {
    right: -18px;
    border-left: 20px solid #f1c40f;
}
.solar-label {
    top: 57%;
    left: 28%;
}

/* 2. 반사 (알베도) */
.albedo-out {
    top: 50%;
    left: 38%;
    width: 25%;
    background: #ecf0f1;
    box-shadow: 0 0 15px #ecf0f1;
    transform: rotate(45deg); /* 각도 수정 */
    transform-origin: right center; /* 회전축 수정 */
}
.albedo-out::after {
    left: -18px;
    border-right: 20px solid #ecf0f1;
}
.albedo-label {
    top: 12%;
    left: 40%;
}

/* 3. 지구 복사 (방출) */
.earth-out {
    bottom: 37%;
    left: 43%;
    width: 20%;
    background: #e74c3c;
    box-shadow: 0 0 15px #e74c3c;
    transform: rotate(-5deg); /* 각도 수정 */
    transform-origin: right center; /* 회전축 수정 */
}
.earth-out::after {
    left: -18px;
    border-right: 20px solid #e74c3c;
}
.earth-label {
    bottom: 33%;
    left: 35%;
}

/* 4. 온실 효과 (내부 순환) */
.greenhouse-loop {
    position: absolute;
    bottom: 38%;
    left: 20%;
    width: 100px;
    height: 100px;
    border: 0px dashed #e67e22;
    border-color: transparent #e67e22 #e67e22 transparent;
    border-radius: 50%;
    transform: rotate(135deg);
    box-shadow: 0 0 15px #e67e22;
}

/* [신규] SVG 기반 에너지 수지 흐름도 */
.energy-balance-svg {
    position: absolute;
    inset: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    overflow: visible;
}

.energy-balance-svg text {
    font-family: 'Noto Sans KR', sans-serif;
    font-weight: 700;
    fill: #ffffff;
    paint-order: stroke;
    stroke: rgba(0, 0, 0, 0.85);
    stroke-width: 3px;
}

.energy-balance-svg .flow-path {
    fill: none;
    stroke-linecap: round;
    stroke-linejoin: round;
}


/* [제2구간] 바다의 길 */
.earth-system-ocean-view {
    position: relative;
    width: 100%;
    height: 100vh;
    /* 배경 지도 설정 */
    background-image: url('images_ocean/ocean-bg.webp');
    background-size: cover;
    background-position: center;
    overflow: hidden;
}

/* 엘니뇨/라니냐 오버레이 (태평양 적도) */
.enso-overlay {
    position: absolute;
    top: 43%;
    left: 63%;
    transform: translate(-50%, -50%);
    width: 60%;
    height: 20%;
    pointer-events: none;
    transition: all 0.5s ease;
    opacity: 1;
    /* [수정] 항상 보이게 변경 (글자 표시용) */
}

/* 웜 풀 (수온 상승 구역) */
.warm-pool {
    position: absolute;
    top: 0;
    bottom: 0;
    background: radial-gradient(ellipse at center, rgba(255, 50, 50, 0.6), transparent 70%);
    border-radius: 50%;
    transition: all 0.5s ease;
    opacity: 0;
    /* [수정] 평상시에는 붉은 원만 숨김 */
}

/* 상태별 스타일 */
/* 엘니뇨: 동태평양(오른쪽) 수온 상승 */
.earth-system-ocean-view.elnino .warm-pool {
    left: 50%;
    width: 40%;
    opacity: 1;
    /* [수정] 엘니뇨 때 붉은 원 등장 */
}

.earth-system-ocean-view.elnino .enso-label::after {
    content: "무역풍 약화, 동태평양 수온 상승";
}

/* 라니냐: 서태평양(왼쪽) 수온 과열 */
.earth-system-ocean-view.lanina .warm-pool {
    left: 10%;
    width: 40%;
    background: radial-gradient(ellipse at center, rgba(200, 0, 0, 0.8), transparent 70%);
    opacity: 1;
    /* [수정] 라니냐 때 붉은 원 등장 */
}

.earth-system-ocean-view.lanina .enso-label::after {
    content: "무역풍 강화, 서태평양 수온 과열";
}

/* [신규] 기본 상태(평상시) 텍스트 설정 */
.enso-label::after {
    content: "평상시";
}

/* [신규] 웜 풀 내부 텍스트 (무역풍 상태 표시) */
/* 공통 스타일: 중앙 정렬 및 폰트 설정 */
.earth-system-ocean-view.elnino .warm-pool::after,
.earth-system-ocean-view.lanina .warm-pool::after {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    /* 부모(.warm-pool)의 정중앙에 위치 */
    color: #fff;
    font-size: 1.2rem;
    font-weight: 800;
    text-shadow: 0 1px 5px rgba(0, 0, 0, 0.8);
    /* 가독성을 위한 그림자 */
    white-space: nowrap;
    pointer-events: none;
}

/* 엘니뇨일 때 텍스트 */
.earth-system-ocean-view.elnino .warm-pool::after {
    content: "약한 무역풍";
}

/* 라니냐일 때 텍스트 */
.earth-system-ocean-view.lanina .warm-pool::after {
    content: "강한 무역풍";
}

/* 라벨 */
.enso-label {
    position: absolute;
    bottom: -40px;
    width: 100%;
    text-align: center;
    color: #fff;
    font-weight: 700;
    font-size: 1.2rem;
    text-shadow: 0 0 5px #000;
}

/* 컨트롤 패널 */
.enso-controls {
    position: absolute;
    top: 20px;
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    gap: 10px;
    z-index: 20;
    background: rgba(0, 0, 0, 0.5);
    padding: 10px;
    border-radius: 30px;
}

.enso-controls button {
    background: transparent;
    border: 1px solid #fff;
    color: #fff;
    padding: 5px 15px;
    border-radius: 20px;
    cursor: pointer;
    font-weight: 700;
}

.enso-controls button.active {
    background: #fff;
    color: #000;
}

/* 정보 카드 (Glassmorphism) - 시인성 개선 */
/* 정보 카드 (Glassmorphism) - 크기 20% 축소 적용 */
.ocean-card {
    position: absolute;
    background: rgba(0, 0, 0, 0.3);
    backdrop-filter: blur(5px);
    border: 1px solid rgba(255, 255, 255, 0.2);

    /* [수정] 크기 관련 속성 20% 축소 */
    padding: 12px;
    /* 15px -> 12px */
    border-radius: 8px;
    /* 10px -> 8px */
    width: 175px;
    /* 175px -> 150px */

    color: #fff;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.5);
    cursor: pointer;
    transition: transform 0.2s;
    z-index: 10;
}

.ocean-card:hover {
    transform: scale(1.05);
    background: rgba(0, 0, 0, 0.6);
}

.ocean-card h3 {
    margin: 0 0 4px 0;
    /* 5px -> 4px */

    /* [수정] 폰트 크기 축소 */
    font-size: 0.8rem;
    /* 1rem -> 0.8rem */

    text-align: center;
}

.ocean-card p {
    margin: 0;

    /* [수정] 폰트 크기 축소 */
    font-size: 0.6rem;
    /* 0.85rem -> 0.6rem */

    line-height: 1.4;
    text-align: center;
}

/* 난류: 붉은색 */
.kuroshio h3,
.gulf-stream h3,
.north-atlantic h3,
.equatorial-counter h3 {
    /* .equatorial-counter 추가 */
    color: #ff6b6b;
}

/* 한류: 파란색 (남극 순환류 포함) */
.california h3,
.peru-current h3,
.benguela h3,
.antarctic h3,
.eastwind h3 {
    color: #91c8ff;
}

/* 계절풍: 노란색 */
.somali h3 {
    color: #ffd700;
}

.ocean-card p {
    margin: 0;
    font-size: 0.85rem;
    line-height: 1.4;
    text-align: center;
    /* [추가] 본문 가운데 정렬 */
}

/* 카드 위치 (지도 좌표에 맞춰 정밀 조정) */

/* 1. 쿠로시오 (일본 근해 - 좌측 상단) */
.kuroshio {
    top: 25%;
    left: 44%;
}

/* 2. 캘리포니아 (북미 서안 - 중앙 상단) */
.california {
    top: 18%;
    left: 58%;
}

/* 3. 페루 (남미 서안 - 중앙 하단) */
.peru-current {
    top: 60%;
    left: 80%;
}

/* 4. 멕시코 만류 (북대서양 - 우측 상단) */
/* [수정] 좌상단으로 미세 이동 (20%->18%, 60%->58%) */
.gulf-stream {
    top: 30%;
    left: 77%;
}

/* 5. 남극 순환류 (남극해 - 하단 중앙) [신규] */
.antarctic {
    top: 80%;
    left: 40%;
    transform: translateX(-50%);
}

/* 6. 소말리아 해류 (아프리카의 뿔 - 우측 상단) */
.somali {
    top: 40%;
    left: 20%;
}

/* 7. 벵겔라 해류 (아프리카 남서안 - 우측 하단) */
.benguela {
    top: 57%;
    left: 7%;
}

/* 8. 북대서양 해류 (유럽 서안 - 우측 상단) */
.north-atlantic {
    top: 5%;
    left: 2%;
}

/* 9. 적도 반류 (태평양 중앙 - 캘리포니아 좌하단) */
.equatorial-counter {
    top: 40%;
    left: 55%;
}

/* 10. 남극 연안류 (남극해 - 하단 중앙) [신규] */
.eastwind {
    top: 85%;
    left: 68%;
}

/* [해류별 호버 이동 효과 - 강도 3배 확대] */

/* 1. 쿠로시오 (북동쪽 ↗) */
.kuroshio:hover {
    transform: scale(1.01) translate(8px, -42px);
}

/* 2. 캘리포니아 (남동쪽 ↘) */
.california:hover {
    transform: scale(1.01) translate(22px, 42px);
}

/* 3. 페루 (북서쪽 ↖) */
.peru-current:hover {
    transform: scale(1.01) translate(8px, -42px);
}

/* 4. 멕시코 만류 (북동쪽 ↗) */
.gulf-stream:hover {
    transform: scale(1.01) translate(15px, -32px);
}

/* 5. 소말리아 (북동쪽 ↗) */
.somali:hover {
    transform: scale(1.01) translate(15px, -35px);
}

/* 6. 벵겔라 (북서쪽 ↖) */
.benguela:hover {
    transform: scale(1.01) translate(-6px, -36px);
}

/* 8. 북대서양 해류 (북동쪽 ↗) */
.north-atlantic:hover {
    transform: scale(1.01) translate(15px, -32px);
}

/* 9. 적도 반류 (동쪽 ➡) */
.equatorial-counter:hover {
    transform: scale(1.01) translate(60px, 0);
}

/* 9. 남극 연안류 (동쪽 ➡) */
.eastwind:hover {
    transform: scale(1.01) translate(-60px, 0);
}

/* [신규] 하늘 섹션 소제목 스타일 */
.sky-section-title {
    font-family: 'Noto Serif KR', serif;
    font-size: 1.5rem;
    font-weight: 700;
    color: #fff;
    text-shadow: 0 2px 10px rgba(0, 0, 0, 0.5);
    margin: 60px 0 20px 20px;
    /* 위쪽 여백을 넉넉히 주어 구분감 확보 */
    padding-left: 15px;
    border-left: 3px solid rgba(255, 255, 255, 0.8);
    /* 좌측 강조선 */
    display: flex;
    align-items: center;
    max-width: 1400px;
    /* 그리드 너비와 맞춤 */
    margin-left: auto;
    margin-right: auto;
}

/* 첫 번째 제목(구름)은 제트기류 바로 아래라 여백을 좀 줄임 */
.sky-section-title:first-of-type {
    margin-top: 30px;
}

/* 모바일 대응 */
@media (max-width: 1024px) {
    .sky-section-title {
        font-size: 1.5rem;
        margin: 40px 20px 15px 20px;
    }
}

/* [신규] 랜덤 탐험 버튼 스타일 */
.discovery-container {
    margin: 30px 0;
    z-index: 10;
    position: relative;
    /* z-index 적용을 위해 */
}

.discovery-btn {
    background: rgba(255, 255, 255, 0.15);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.3);
    color: #fff;
    padding: 12px 30px;
    border-radius: 50px;
    font-size: 1.1rem;
    font-weight: 700;
    cursor: pointer;
    transition: all 0.3s ease;
    box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    font-family: 'Pretendard', sans-serif;
    display: flex;
    align-items: center;
    gap: 10px;
    text-shadow: 0 1px 3px rgba(0, 0, 0, 0.5);
}

.discovery-btn:hover {
    background: rgba(255, 255, 255, 0.9);
    color: #2d3436;
    transform: translateY(-3px) scale(1.05);
    box-shadow: 0 10px 25px rgba(0, 0, 0, 0.3);
    text-shadow: none;
}

/* 텍스트 페이드인 애니메이션 */
@keyframes textFadeIn {
    from {
        opacity: 0;
        transform: translateY(5px);
    }

    to {
        opacity: 1;
        transform: translateY(0);
    }
}

#discovery-text {
    display: inline-block;
    animation: textFadeIn 0.5s ease-out;
}

/* [신규] 메타데이터 알약 태그 스타일 */
.meta-tag {
    display: inline-block;
    font-size: 0.7rem;
    font-weight: 500;
    font-family: 'Inter', sans-serif;

    /* 테마 색상을 배경으로 사용하되, 연하게(10%) 처리하여 가독성 확보 */
    background-color: color-mix(in srgb, var(--panel-theme, #2d3436) 10%, transparent);
    color: var(--panel-theme, #2d3436);
    /* 글자색은 테마색 그대로 */

    padding: 3px 8px;
    border-radius: 6px;
    /* 둥근 사각형 알약 */
    margin-right: 6px;
    margin-bottom: 4px;
}

/* [수정] 세부 항목(Detail Item) 호버 효과 */
.detail-item {
    transition: all 0.2s ease;

    /* [중요] 기존 왼쪽 띠지(border-left)는 건드리지 않고, 나머지 3면만 투명 테두리 추가 */
    border-top: 1px solid transparent;
    border-right: 1px solid transparent;
    border-bottom: 1px solid transparent;
    /* border-left는 기존 스타일(3px solid 테마색)이 유지됨 */

    border-radius: 4px;
    /* 기존 둥근 모서리 유지 */
    /* padding은 기존 값 유지하되 필요시 조정 */
}



.detail-item:hover .item-title-group {
    border-left-color: var(--panel-theme, #2d3436); /* 호버 시 띠지 색상 변경 */
}

.detail-desc, .full-list-container {
    padding: 0 15px 0 20px; /* 제거된 부모의 우측 여백(15px)을 여기서 보충 */
}

.detail-item:hover {
    background-color: #fff;
    /* 호버 시 4면 모두 테마색 테두리 적용 (왼쪽 띠지는 더 두꺼워짐) */
    border-color: var(--panel-theme, #2d3436);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
    transform: translateY(-2px);
}

/* [핵심 수정] 마지막 항목도 호버 시에는 아래쪽 테두리를 강제로 표시 */
.detail-item:last-child:hover {
    border-bottom: 1px solid var(--panel-theme, #2d3436) !important;
}

/* [수정] 카드 흔들기 애니메이션 (탄성 효과 강화) */
@keyframes cardWiggle {
    0% {
        transform: rotateZ(0deg);
    }

    20% {
        transform: rotateZ(-1.5deg);
    }

    /* 왼쪽으로 크게 */
    40% {
        transform: rotateZ(1.5deg);
    }

    /* 오른쪽으로 크게 */
    60% {
        transform: rotateZ(-0.8deg);
    }

    /* 왼쪽으로 작게 */
    80% {
        transform: rotateZ(0.8deg);
    }

    /* 오른쪽으로 작게 */
    100% {
        transform: rotateZ(0deg);
    }
}

.wiggle-animation {
    /* 시간 단축 (1.5s -> 0.8s) 및 가속도 변경 */
    animation: cardWiggle 0.8s cubic-bezier(0.36, 0.07, 0.19, 0.97) forwards;
    transform-origin: center center;
}

/* 텍스트 설명 (카드 추가로 인해 숨김 처리) */
.balance-text {
    display: none;
}

/* [신규] 지구 시스템 정보 카드 위치 */
.earth-info-cards-container {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    /* 카드 아래 지구와 상호작용 가능하게 */
}

.earth-info-cards-container .ocean-card {
    pointer-events: auto;
    /* 카드 자체는 클릭/호버 가능하게 */
    width: 220px;
    /* 카드 너비 조정 */
}

/* --- 위치 조정 영역 --- */

/* 카드 1: 저위도 (좌측 하단) */
.card-surplus {
    top: 69%;
    left: 42%;
}

/* 카드 2: 고위도 (좌측 상단) */
.card-deficit {
    top: 5%;
    left: 57%;
}

/* 카드 3: 대기 대순환 (우측 상단) */
.card-circulation {
    top: 35%;
    left: 44%;
}

/* 카드 4: 전향력 (우측 하단) */
.card-coriolis {
    top: 73%;
    left: 65%;
}

/* [신규] 지구 시스템 정보 카드 제목 색상 */

/* 1. 저위도: 에너지 과잉 (태양 복사 상징) */
.card-surplus h3 {
    color: #f1c40f;
    /* 노란색 */
}

/* 2. 고위도: 에너지 부족 (지구 복사 상징) */
.card-deficit h3 {
    color: #e74c3c;
    /* 붉은색 */
}

/* 3. 대기 대순환 (공기의 흐름 상징) */
.card-circulation h3 {
    color: #3498db;
    /* 파란색 */
}

/* 4. 전향력 (지구 자전 상징) */
.card-coriolis h3 {
    color: #9b59b6;
    /* 보라색 */
}

/* [PC 전용 레이아웃 고정 - 최종 수정] */
@media (min-width: 1025px) {

    /* 1. body 자체에 최소 너비를 주어 
          창이 줄어들면 브라우저가 알아서 스크롤바를 만들게 함 */
    body {
        min-width: 1850px !important;
        /* 스크롤바 고려한 안전 수치 */
        overflow-x: auto !important;
    }

    /* 2. 헤더와 컨텐츠 컨테이너는 건드리지 않음 
          (기존의 max-width와 margin: 0 auto가 작동하도록 둠) */
}

/* [v5.8 Refactoring] 특수 카드(버튼 포함) 내부 레이아웃 보정 */
.panel-criteria-group.map-open-wrapper {
    display: flex; /* 특수 카드는 내부 구조가 복잡하므로 Flex로 전환 */
    flex-direction: column;
}

/* [기단 섹션 전용] region-card 속성 덮어쓰기 (유리 디자인 유지) */
#air-mass-panel .region-card {
    /* 기존 region-card의 흰색 배경과 테두리를 무력화 */
    background: rgba(0, 0, 0, 0.4) !important; /* precip-card의 어두운 유리색 */
    backdrop-filter: blur(10px) !important;
    border: 1px solid rgba(255, 255, 255, 0.2) !important;
    border-left: 1px solid rgba(255, 255, 255, 0.2) !important; /* 띠지 제거 */
    border-radius: 12px !important;
    padding: 20px !important;
    height: auto !important; /* 고정 높이 해제 */
    min-height: 180px; /* 적절한 높이 확보 */
    
    /* Flex 정렬 해제 (내부 그리드 사용 위해) */
    display: block !important;
    text-align: left !important;
    cursor: pointer;
}

/* 호버 효과 */
#air-mass-panel .region-card:hover {
    transform: translateY(-5px);
    background: rgba(0, 0, 0, 0.5) !important;
    box-shadow: 0 10px 20px rgba(0,0,0,0.2) !important;
}

/* 활성 상태 (패널 열림) */
#air-mass-panel .region-card.active {
    background: rgba(255, 255, 255, 0.15) !important; /* 살짝 밝게 */
    border-color: rgba(255, 255, 255, 0.6) !important;
    transform: scale(1.02);
}

/* region-card의 기본 요소 숨기기 (헤더, 아이콘 등) */
/* renderAirMass 함수가 직접 내부 HTML을 구성하므로 기존 요소는 숨김 */
#air-mass-panel .region-card .card-header,
#air-mass-panel .region-card .card-bg-icon,
#air-mass-panel .region-card .expand-icon {
    display: none !important;
}

/* ===================================================== */
/* [기단/전선 섹션 전용] 상세 패널 다크 모드 (유리 질감) */
/* ===================================================== */

/* 1. 패널 전체 배경: 어두운 유리로 변경 */
#section-cloud .detail-panel {
    background: rgba(15, 23, 42, 0.6) !important; /* 짙은 남색 반투명 */
    backdrop-filter: blur(15px) !important;
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5) !important;
}

/* 2. 패널 내부 중분류 카드 (Sub-card): 더 밝은 유리 */
#section-cloud .sub-region-card {
    background: rgba(255, 255, 255, 0.1) !important; /* 흰색 10% 투명 */
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    color: #fff !important; /* 기본 글자색 흰색 */
}

/* 3. 텍스트 색상 반전 (검정 -> 흰색) */
#section-cloud .sub-title-heading,
#section-cloud .sub-title-description,
#section-cloud .detail-name,
#section-cloud .detail-desc,
#section-cloud .criteria-label,
#section-cloud .criteria-text {
    color: rgba(255, 255, 255, 0.9) !important;
    text-shadow: 0 1px 2px rgba(0,0,0,0.5); /* 가독성용 그림자 */
}

/* 4. 리스트 아이템 스타일 조정 */
#section-cloud .detail-item {
    border-left: none !important;
    /* rgba의 마지막 수치(0.4)를 높일수록 더 어두워집니다 */
    background-color: rgba(0, 0, 0, 0.2) !important;
}
#section-cloud .item-title-group {
    border-left: none !important;
}
/* 다크모드: 가로/세로 그라데이션 강제 적용 */
#section-cloud .item-title-group::before {
    background: linear-gradient(to right, var(--panel-theme), transparent) !important;
}
#section-cloud .item-title-group::after {
    background: linear-gradient(to bottom, var(--panel-theme), transparent) !important;
}

#section-cloud .detail-item:hover {
    /* 색상을 0, 0, 0으로 바꾸고 마지막 수치(0.6)를 높일수록 더 어두워집니다 */
    background-color: rgba(0, 0, 0, 0.5) !important;
}

/* 5. 메타데이터 태그 (알약) 스타일 */
#section-cloud .meta-tag {
    background-color: rgba(255, 255, 255, 0.2) !important;
    color: #fff !important;
    border: 1px solid var(--panel-theme);
}

/* 6. 닫기 버튼 */
#section-cloud .close-panel-btn {
    background: rgba(255, 255, 255, 0.2) !important;
    color: #fff !important;
    border: 1px solid rgba(255, 255, 255, 0.3) !important;
}

#section-cloud .close-panel-btn:hover {
    background: var(--panel-theme) !important;
}

/* 7. 숫자 박스 (1, 2, 3...) */
#section-cloud .sub-title-number {
    color: #fff !important;
    border-color: rgba(255, 255, 255, 0.5) !important;
    background: rgba(0,0,0,0.2) !important;
}

/* [핵심 수정] 패널의 '진짜 배경'인 가상 요소(::before)를 어둡게 변경 */
#section-cloud .detail-panel::before {
    background: rgba(15, 23, 42, 0.7) !important; /* 짙은 남색 유리 */
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    backdrop-filter: blur(15px) !important;
    box-shadow: 0 20px 50px rgba(0, 0, 0, 0.5) !important;
}

/* [추가 보완] 중분류 카드 내부의 텍스트 강제 흰색 처리 */
#section-cloud .sub-region-card * {
    color: rgba(255, 255, 255, 0.95) !important;
    text-shadow: none !important; /* 그림자가 너무 진하면 지저분해 보일 수 있어 제거하거나 약하게 */
}

/* [추가 보완] 링크(a 태그) 색상도 밝게 */
#section-cloud .detail-name a {
    color: #74b9ff !important; /* 링크는 밝은 하늘색으로 포인트 */
    text-decoration: none !important;
}

#section-cloud .detail-name a:hover {
    color: #fff !important;
    text-decoration: underline !important;
}

/* [신규] 지구 시스템 대시보드 카드 스타일 */
.earth-info-cards-container .ocean-card {
    /* 평소 상태: 작고 간결하게 */
    max-height: 85px; /* 제목과 지표만 보일 높이 */
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 8px;
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1); /* 부드러운 확장 */
    padding: 15px;
    width: 240px; /* 너비 약간 확대 */
    text-align: left; /* 텍스트 왼쪽 정렬 */
}

/* 호버 상태: 확장 및 강조 */
.earth-info-cards-container .ocean-card:hover {
    max-height: 300px; /* 내용이 다 보일 만큼 확장 */
    background: rgba(0, 0, 0, 0.8); /* 배경을 진하게 하여 가독성 확보 */
    transform: scale(1.05);
    z-index: 100;
    border-color: rgba(255, 255, 255, 0.6);
}

/* 핵심 지표 (가운데 박스) */
.card-indicator {
    font-size: 0.9rem;
    font-weight: 700;
    color: #fff;
    background: rgba(255, 255, 255, 0.15);
    padding: 6px 10px;
    border-radius: 6px;
    text-align: center;
    align-self: flex-start; /* 왼쪽 정렬 */
    width: 100%;
    box-sizing: border-box;
    border: 1px solid rgba(255, 255, 255, 0.1);
}

/* 상세 내용 (평소엔 숨김) */
.card-detail {
    opacity: 0;
    transition: opacity 0.3s ease 0.1s; /* 카드가 커진 뒤 글자가 나타나도록 딜레이 */
    font-size: 0.85rem;
    line-height: 1.5;
    color: #ddd;
    margin-top: 5px;
    padding-top: 10px;
    border-top: 1px dashed rgba(255, 255, 255, 0.2);
}

/* 호버 시 상세 내용 표시 */
.earth-info-cards-container .ocean-card:hover .card-detail {
    opacity: 1;
}

/* 상세 내용 내부 강조 */
.card-detail p {
    margin: 0 0 8px 0;
}

.card-detail strong {
    color: #fff;
    font-weight: 700;
    display: inline-block;
    margin-bottom: 2px;
}

/* 제목 스타일 재정의 (왼쪽 정렬) */
.earth-info-cards-container .ocean-card h3 {
    text-align: left;
    margin: 0;
    font-size: 1.1rem;
}

/* [신규] 지구 시스템 좌측 용어 사전 스타일 */
.earth-glossary {
    position: absolute;
    top: 50%;
    left: 40px; /* 좌측 여백 */
    transform: translateY(-50%);
    width: 260px;
    z-index: 20;
    display: flex;
    flex-direction: column;
    gap: 15px;
    pointer-events: none; /* 컨테이너 자체는 클릭 통과 */
}

.glossary-title {
    font-family: 'Inter', sans-serif;
    font-size: 0.8rem;
    font-weight: 900;
    color: rgba(255, 255, 255, 0.5);
    letter-spacing: 2px;
    margin-bottom: 5px;
    padding-left: 5px;
}

.glossary-item {
    pointer-events: auto; /* 아이템은 클릭 가능 */
    background: rgba(0, 0, 0, 0.4);
    backdrop-filter: blur(8px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    border-radius: 10px;
    overflow: hidden;
    transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
}

/* 호버 시 확장 */
.glossary-item:hover {
    background: rgba(0, 0, 0, 0.7);
    border-color: rgba(255, 255, 255, 0.4);
    transform: translateX(5px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
}

.glossary-header {
    padding: 12px 15px;
    font-size: 0.95rem;
    font-weight: 700;
    color: #fff;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: default;
}

.g-icon {
    font-size: 1.1rem;
}

/* 내용 영역 (평소엔 숨김) */
.glossary-content {
    max-height: 0;
    opacity: 0;
    padding: 0 15px;
    transition: all 0.4s ease;
    border-top: 1px solid transparent;
}

/* 호버 시 내용 표시 */
.glossary-item:hover .glossary-content {
    max-height: 200px; /* 충분한 높이 */
    opacity: 1;
    padding-bottom: 15px;
    border-top-color: rgba(255, 255, 255, 0.1);
}

.g-def {
    font-size: 0.8rem;
    color: #ccc;
    margin: 10px 0;
    line-height: 1.4;
}

.g-sub-row {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.8rem;
    color: #eee;
    margin-bottom: 6px;
}

/* 태그 스타일 */
.g-tag {
    font-size: 0.7rem;
    font-weight: 700;
    padding: 2px 6px;
    border-radius: 4px;
    background: rgba(255, 255, 255, 0.1);
    min-width: 50px;
    text-align: center;
}

/* 태그별 컬러 포인트 */
.g-tag.high { color: #74b9ff; border: 1px solid #74b9ff; } /* 알베도 높음 (파랑) */
.g-tag.low { color: #ff7675; border: 1px solid #ff7675; }  /* 알베도 낮음 (빨강) */
.g-tag.pos { color: #ff7675; border: 1px solid #ff7675; }  /* 양성 피드백 (빨강-위험) */
.g-tag.neg { color: #55efc4; border: 1px solid #55efc4; }  /* 음성 피드백 (초록-안정) */

/* [신규] 카드 요약 문구 스타일 */
.card-summary {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.7); /* 은은한 흰색 */
    margin: 0;
    line-height: 1.3;
    font-weight: 400;
}

/* [수정] 카드 높이 조정 (요약 문구 공간 확보) */
/* 기존 .earth-info-cards-container .ocean-card 규칙을 덮어씌웁니다 */
.earth-info-cards-container .ocean-card {
    max-height: 115px !important; /* 85px -> 115px로 확대 */
    /* 나머지 속성은 기존 유지되므로 생략 가능하나, 확실히 하기 위해 명시 */
    overflow: hidden;
    display: flex;
    flex-direction: column;
    gap: 6px; /* 간격 미세 조정 */
    transition: all 0.4s cubic-bezier(0.25, 0.8, 0.25, 1);
    padding: 15px;
    width: 240px;
    text-align: left;
}

/* 호버 시 높이도 살짝 더 여유 있게 */
.earth-info-cards-container .ocean-card:hover {
    max-height: 320px !important; /* 300px -> 320px */
}

/* [수정] 용어 사전 설명글 스타일 (상시 노출) */
.g-def {
    font-size: 0.8rem;
    color: rgba(255, 255, 255, 0.7); /* 은은한 흰색 */
    margin: 0;
    padding: 0 15px 12px 15px; /* 헤더 아래에 위치하도록 패딩 조정 */
    line-height: 1.4;
    display: block; /* 항상 보임 */
}

/* [수정] 숨겨진 콘텐츠 영역 (구분선 추가) */
.glossary-content {
    max-height: 0;
    opacity: 0;
    padding: 0 15px;
    transition: all 0.4s ease;
    border-top: 1px solid transparent;
}

/* 호버 시 구분선과 함께 확장 */
.glossary-item:hover .glossary-content {
    max-height: 200px;
    opacity: 1;
    padding-top: 10px; /* 내부 여백 */
    padding-bottom: 15px;
    border-top-color: rgba(255, 255, 255, 0.2); /* 구분선 표시 */
}

button:focus-visible {
  outline: 2px solid rgba(80, 200, 255, 0.9);
  outline-offset: 3px;
  border-radius: 10px;
}

.meta-tag {
  /* 기존 background: (테마색) 유지 */

  color: color-mix(in srgb, var(--panel-theme) 55%, rgba(10,12,14,0.85));
  font-weight: 600;
}

/* 예시 위계 통일: 헤더 예시 + hover로 뜨는 전체 예시 */
.detail-examples,
.full-list-container{
  font-style: italic;
  font-size: 0.76rem;
  opacity: 0.85;
  letter-spacing: -0.01em;
}

/* (선택) 링크도 동일하게 기울임 유지 */
.full-list-container a{
  font-style: italic;
}

/* [예시 전용] '국기 처리(i 태그)'만 자간(letter-spacing) 정상화 */
.detail-examples i,
.full-list-container i {
  letter-spacing: -0.04em !important;
}

